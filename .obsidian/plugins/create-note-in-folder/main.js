/** GENERATED BY OBSIDIAN-PLUGIN-CLI, DO NOT EDIT */
var ji=Object.create;var ht=Object.defineProperty,Pi=Object.defineProperties,Fi=Object.getOwnPropertyDescriptor,Ei=Object.getOwnPropertyDescriptors,Ci=Object.getOwnPropertyNames,Ur=Object.getOwnPropertySymbols,Ti=Object.getPrototypeOf,zr=Object.prototype.hasOwnProperty,Li=Object.prototype.propertyIsEnumerable;var Kr=(i,e,t)=>e in i?ht(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,De=(i,e)=>{for(var t in e||(e={}))zr.call(e,t)&&Kr(i,t,e[t]);if(Ur)for(var t of Ur(e))Li.call(e,t)&&Kr(i,t,e[t]);return i},Ie=(i,e)=>Pi(i,Ei(e)),Jr=i=>ht(i,"__esModule",{value:!0});var Gt=(i,e)=>{Jr(i);for(var t in e)ht(i,t,{get:e[t],enumerable:!0})},Ai=(i,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ci(e))!zr.call(i,n)&&n!=="default"&&ht(i,n,{get:()=>e[n],enumerable:!(t=Fi(e,n))||t.enumerable});return i},Ee=i=>Ai(Jr(ht(i!=null?ji(Ti(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);var N=(i,e,t)=>new Promise((n,r)=>{var a=l=>{try{s(t.next(l))}catch(f){r(f)}},o=l=>{try{s(t.throw(l))}catch(f){r(f)}},s=l=>l.done?n(l.value):Promise.resolve(l.value).then(a,o);s((t=t.apply(i,e)).next())});Gt(exports,{default:()=>Dr});function z(i){return z=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(i)}function te(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Qt(i,e){if(z(i)!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(z(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function vt(i){var e=Qt(i,"string");return z(e)=="symbol"?e:String(e)}function qr(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,vt(n.key),n)}}function re(i,e,t){return e&&qr(i.prototype,e),t&&qr(i,t),Object.defineProperty(i,"prototype",{writable:!1}),i}function de(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function yt(i,e){return yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},yt(i,e)}function rt(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&yt(i,e)}function He(i,e){if(e&&(z(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return de(i)}function ne(i){return ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ne(i)}function Oe(i,e,t){return e=vt(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Zt(i){if(Array.isArray(i))return i}function er(i){if(typeof Symbol!="undefined"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Lt(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=i[t];return n}function tr(i,e){if(!!i){if(typeof i=="string")return Lt(i,e);var t=Object.prototype.toString.call(i).slice(8,-1);if(t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set")return Array.from(i);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Lt(i,e)}}function rr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nr(i){return Zt(i)||er(i)||tr(i)||rr()}function Yr(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Xr(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yr(Object(t),!0).forEach(function(n){Oe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):Yr(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}var Ri={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,t){console&&console[e]&&console[e].apply(console,t)}},ki=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};te(this,i),this.init(e,t)}return re(i,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||Ri,this.options=n,this.debug=n.debug}},{key:"setDebug",value:function(t){this.debug=t}},{key:"log",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}},{key:"warn",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}},{key:"error",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"error","")}},{key:"deprecate",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(t,n,r,a){return a&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(r).concat(this.prefix," ").concat(t[0])),this.logger[n](t))}},{key:"create",value:function(t){return new i(this.logger,Xr(Xr({},{prefix:"".concat(this.prefix,":").concat(t,":")}),this.options))}},{key:"clone",value:function(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new i(this.logger,t)}}]),i}(),Se=new ki,Be=function(){function i(){te(this,i),this.observers={}}return re(i,[{key:"on",value:function(t,n){var r=this;return t.split(" ").forEach(function(a){r.observers[a]=r.observers[a]||[],r.observers[a].push(n)}),this}},{key:"off",value:function(t,n){if(!!this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(function(r){return r!==n})}}},{key:"emit",value:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];if(this.observers[t]){var o=[].concat(this.observers[t]);o.forEach(function(l){l.apply(void 0,r)})}if(this.observers["*"]){var s=[].concat(this.observers["*"]);s.forEach(function(l){l.apply(l,[t].concat(r))})}}}]),i}();function bt(){var i,e,t=new Promise(function(n,r){i=n,e=r});return t.resolve=i,t.reject=e,t}function Gr(i){return i==null?"":""+i}function Di(i,e,t){i.forEach(function(n){e[n]&&(t[n]=e[n])})}function ir(i,e,t){function n(s){return s&&s.indexOf("###")>-1?s.replace(/###/g,"."):s}function r(){return!i||typeof i=="string"}for(var a=typeof e!="string"?[].concat(e):e.split(".");a.length>1;){if(r())return{};var o=n(a.shift());!i[o]&&t&&(i[o]=new t),Object.prototype.hasOwnProperty.call(i,o)?i=i[o]:i={}}return r()?{}:{obj:i,k:n(a.shift())}}function Qr(i,e,t){var n=ir(i,e,Object),r=n.obj,a=n.k;r[a]=t}function Ii(i,e,t,n){var r=ir(i,e,Object),a=r.obj,o=r.k;a[o]=a[o]||[],n&&(a[o]=a[o].concat(t)),n||a[o].push(t)}function At(i,e){var t=ir(i,e),n=t.obj,r=t.k;if(!!n)return n[r]}function Bi(i,e,t){var n=At(i,t);return n!==void 0?n:At(e,t)}function Zr(i,e,t){for(var n in e)n!=="__proto__"&&n!=="constructor"&&(n in i?typeof i[n]=="string"||i[n]instanceof String||typeof e[n]=="string"||e[n]instanceof String?t&&(i[n]=e[n]):Zr(i[n],e[n],t):i[n]=e[n]);return i}function nt(i){return i.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Mi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Vi(i){return typeof i=="string"?i.replace(/[&<>"'\/]/g,function(e){return Mi[e]}):i}var Rt=typeof window!="undefined"&&window.navigator&&typeof window.navigator.userAgentData=="undefined"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,_i=[" ",",","?","!",";"];function $i(i,e,t){e=e||"",t=t||"";var n=_i.filter(function(s){return e.indexOf(s)<0&&t.indexOf(s)<0});if(n.length===0)return!0;var r=new RegExp("(".concat(n.map(function(s){return s==="?"?"\\?":s}).join("|"),")")),a=!r.test(i);if(!a){var o=i.indexOf(t);o>0&&!r.test(i.substring(0,o))&&(a=!0)}return a}function kt(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!!i){if(i[e])return i[e];for(var n=e.split(t),r=i,a=0;a<n.length;++a){if(!r||typeof r[n[a]]=="string"&&a+1<n.length)return;if(r[n[a]]===void 0){for(var o=2,s=n.slice(a,a+o).join(t),l=r[s];l===void 0&&n.length>a+o;)o++,s=n.slice(a,a+o).join(t),l=r[s];if(l===void 0)return;if(l===null)return null;if(e.endsWith(s)){if(typeof l=="string")return l;if(s&&typeof l[s]=="string")return l[s]}var f=n.slice(a+o).join(t);return f?kt(l,f,t):void 0}r=r[n[a]]}return r}}function en(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Dt(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?en(Object(t),!0).forEach(function(n){Oe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Wi(i){var e=Hi();return function(){var n=ne(i),r;if(e){var a=ne(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return He(this,r)}}function Hi(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}var Ui=function(i){rt(t,i);var e=Wi(t);function t(n){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return te(this,t),r=e.call(this),Rt&&Be.call(de(r)),r.data=n||{},r.options=a,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.options.ignoreJSONStructure===void 0&&(r.options.ignoreJSONStructure=!0),r}return re(t,[{key:"addNamespaces",value:function(r){this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}},{key:"removeNamespaces",value:function(r){var a=this.options.ns.indexOf(r);a>-1&&this.options.ns.splice(a,1)}},{key:"getResource",value:function(r,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,f=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure,u=[r,a];o&&typeof o!="string"&&(u=u.concat(o)),o&&typeof o=="string"&&(u=u.concat(l?o.split(l):o)),r.indexOf(".")>-1&&(u=r.split("."));var p=At(this.data,u);return p||!f||typeof o!="string"?p:kt(this.data&&this.data[r]&&this.data[r][a],o,l)}},{key:"addResource",value:function(r,a,o,s){var l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},f=l.keySeparator!==void 0?l.keySeparator:this.options.keySeparator,u=[r,a];o&&(u=u.concat(f?o.split(f):o)),r.indexOf(".")>-1&&(u=r.split("."),s=a,a=u[1]),this.addNamespaces(a),Qr(this.data,u,s),l.silent||this.emit("added",r,a,o,s)}},{key:"addResources",value:function(r,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var l in o)(typeof o[l]=="string"||Object.prototype.toString.apply(o[l])==="[object Array]")&&this.addResource(r,a,l,o[l],{silent:!0});s.silent||this.emit("added",r,a,o)}},{key:"addResourceBundle",value:function(r,a,o,s,l){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},u=[r,a];r.indexOf(".")>-1&&(u=r.split("."),s=o,o=a,a=u[1]),this.addNamespaces(a);var p=At(this.data,u)||{};s?Zr(p,o,l):p=Dt(Dt({},p),o),Qr(this.data,u,p),f.silent||this.emit("added",r,a,o)}},{key:"removeResourceBundle",value:function(r,a){this.hasResourceBundle(r,a)&&delete this.data[r][a],this.removeNamespaces(a),this.emit("removed",r,a)}},{key:"hasResourceBundle",value:function(r,a){return this.getResource(r,a)!==void 0}},{key:"getResourceBundle",value:function(r,a){return a||(a=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Dt(Dt({},{}),this.getResource(r,a)):this.getResource(r,a)}},{key:"getDataByLanguage",value:function(r){return this.data[r]}},{key:"hasLanguageSomeTranslations",value:function(r){var a=this.getDataByLanguage(r),o=a&&Object.keys(a)||[];return!!o.find(function(s){return a[s]&&Object.keys(a[s]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),t}(Be),tn={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,t,n,r,a){var o=this;return e.forEach(function(s){o.processors[s]&&(t=o.processors[s].process(t,n,r,a))}),t}};function rn(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function X(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rn(Object(t),!0).forEach(function(n){Oe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):rn(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function zi(i){var e=Ki();return function(){var n=ne(i),r;if(e){var a=ne(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return He(this,r)}}function Ki(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}var nn={},an=function(i){rt(t,i);var e=zi(t);function t(n){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return te(this,t),r=e.call(this),Rt&&Be.call(de(r)),Di(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],n,de(r)),r.options=a,r.options.keySeparator===void 0&&(r.options.keySeparator="."),r.logger=Se.create("translator"),r}return re(t,[{key:"changeLanguage",value:function(r){r&&(this.language=r)}},{key:"exists",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(r==null)return!1;var o=this.resolve(r,a);return o&&o.res!==void 0}},{key:"extractFromKey",value:function(r,a){var o=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;o===void 0&&(o=":");var s=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,l=a.ns||this.options.defaultNS||[],f=o&&r.indexOf(o)>-1,u=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!$i(r,o,s);if(f&&!u){var p=r.match(this.interpolator.nestingRegexp);if(p&&p.length>0)return{key:r,namespaces:l};var d=r.split(o);(o!==s||o===s&&this.options.ns.indexOf(d[0])>-1)&&(l=d.shift()),r=d.join(s)}return typeof l=="string"&&(l=[l]),{key:r,namespaces:l}}},{key:"translate",value:function(r,a,o){var s=this;if(z(a)!=="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),z(a)==="object"&&(a=X({},a)),a||(a={}),r==null)return"";Array.isArray(r)||(r=[String(r)]);var l=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,f=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,u=this.extractFromKey(r[r.length-1],a),p=u.key,d=u.namespaces,c=d[d.length-1],v=a.lng||this.language,b=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(v&&v.toLowerCase()==="cimode"){if(b){var y=a.nsSeparator||this.options.nsSeparator;return l?{res:"".concat(c).concat(y).concat(p),usedKey:p,exactUsedKey:p,usedLng:v,usedNS:c}:"".concat(c).concat(y).concat(p)}return l?{res:p,usedKey:p,exactUsedKey:p,usedLng:v,usedNS:c}:p}var g=this.resolve(r,a),h=g&&g.res,w=g&&g.usedKey||p,x=g&&g.exactUsedKey||p,O=Object.prototype.toString.apply(h),S=["[object Number]","[object Function]","[object RegExp]"],j=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,T=!this.i18nFormat||this.i18nFormat.handleAsObject,E=typeof h!="string"&&typeof h!="boolean"&&typeof h!="number";if(T&&h&&E&&S.indexOf(O)<0&&!(typeof j=="string"&&O==="[object Array]")){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var F=this.options.returnedObjectHandler?this.options.returnedObjectHandler(w,h,X(X({},a),{},{ns:d})):"key '".concat(p," (").concat(this.language,")' returned an object instead of string.");return l?(g.res=F,g):F}if(f){var D=O==="[object Array]",Y=D?[]:{},H=D?x:w;for(var Q in h)if(Object.prototype.hasOwnProperty.call(h,Q)){var xe="".concat(H).concat(f).concat(Q);Y[Q]=this.translate(xe,X(X({},a),{joinArrays:!1,ns:d})),Y[Q]===xe&&(Y[Q]=h[Q])}h=Y}}else if(T&&typeof j=="string"&&O==="[object Array]")h=h.join(j),h&&(h=this.extendTranslation(h,r,a,o));else{var V=!1,U=!1,_e=a.count!==void 0&&typeof a.count!="string",ue=t.hasDefaultValue(a),Ze=_e?this.pluralResolver.getSuffix(v,a.count,a):"",Pe=a["defaultValue".concat(Ze)]||a.defaultValue;!this.isValidLookup(h)&&ue&&(V=!0,h=Pe),this.isValidLookup(h)||(U=!0,h=p);var $e=a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,et=$e&&U?void 0:h,ee=ue&&Pe!==h&&this.options.updateMissing;if(U||V||ee){if(this.logger.log(ee?"updateKey":"missingKey",v,c,p,ee?Pe:h),f){var pe=this.resolve(p,X(X({},a),{},{keySeparator:!1}));pe&&pe.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var fe=[],Fe=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Fe&&Fe[0])for(var ce=0;ce<Fe.length;ce++)fe.push(Fe[ce]);else this.options.saveMissingTo==="all"?fe=this.languageUtils.toResolveHierarchy(a.lng||this.language):fe.push(a.lng||this.language);var tt=function(we,mt,gt){var Ct=ue&&gt!==h?gt:et;s.options.missingKeyHandler?s.options.missingKeyHandler(we,c,mt,Ct,ee,a):s.backendConnector&&s.backendConnector.saveMissing&&s.backendConnector.saveMissing(we,c,mt,Ct,ee,a),s.emit("missingKey",we,c,mt,h)};this.options.saveMissing&&(this.options.saveMissingPlurals&&_e?fe.forEach(function(dt){s.pluralResolver.getSuffixes(dt,a).forEach(function(we){tt([dt],p+we,a["defaultValue".concat(we)]||Pe)})}):tt(fe,p,Pe))}h=this.extendTranslation(h,r,a,g,o),U&&h===p&&this.options.appendNamespaceToMissingKey&&(h="".concat(c,":").concat(p)),(U||V)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?h=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(c,":").concat(p):p,V?h:void 0):h=this.options.parseMissingKeyHandler(h))}return l?(g.res=h,g):h}},{key:"extendTranslation",value:function(r,a,o,s,l){var f=this;if(this.i18nFormat&&this.i18nFormat.parse)r=this.i18nFormat.parse(r,X(X({},this.options.interpolation.defaultVariables),o),s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!o.skipInterpolation){o.interpolation&&this.interpolator.init(X(X({},o),{interpolation:X(X({},this.options.interpolation),o.interpolation)}));var u=typeof r=="string"&&(o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),p;if(u){var d=r.match(this.interpolator.nestingRegexp);p=d&&d.length}var c=o.replace&&typeof o.replace!="string"?o.replace:o;if(this.options.interpolation.defaultVariables&&(c=X(X({},this.options.interpolation.defaultVariables),c)),r=this.interpolator.interpolate(r,c,o.lng||this.language,o),u){var v=r.match(this.interpolator.nestingRegexp),b=v&&v.length;p<b&&(o.nest=!1)}!o.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(o.lng=s.usedLng),o.nest!==!1&&(r=this.interpolator.nest(r,function(){for(var h=arguments.length,w=new Array(h),x=0;x<h;x++)w[x]=arguments[x];return l&&l[0]===w[0]&&!o.context?(f.logger.warn("It seems you are nesting recursively key: ".concat(w[0]," in key: ").concat(a[0])),null):f.translate.apply(f,w.concat([a]))},o)),o.interpolation&&this.interpolator.reset()}var y=o.postProcess||this.options.postProcess,g=typeof y=="string"?[y]:y;return r!=null&&g&&g.length&&o.applyPostProcessor!==!1&&(r=tn.handle(g,r,a,this.options&&this.options.postProcessPassResolved?X({i18nResolved:s},o):o,this)),r}},{key:"resolve",value:function(r){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s,l,f,u,p;return typeof r=="string"&&(r=[r]),r.forEach(function(d){if(!a.isValidLookup(s)){var c=a.extractFromKey(d,o),v=c.key;l=v;var b=c.namespaces;a.options.fallbackNS&&(b=b.concat(a.options.fallbackNS));var y=o.count!==void 0&&typeof o.count!="string",g=y&&!o.ordinal&&o.count===0&&a.pluralResolver.shouldUseIntlApi(),h=o.context!==void 0&&(typeof o.context=="string"||typeof o.context=="number")&&o.context!=="",w=o.lngs?o.lngs:a.languageUtils.toResolveHierarchy(o.lng||a.language,o.fallbackLng);b.forEach(function(x){a.isValidLookup(s)||(p=x,!nn["".concat(w[0],"-").concat(x)]&&a.utils&&a.utils.hasLoadedNamespace&&!a.utils.hasLoadedNamespace(p)&&(nn["".concat(w[0],"-").concat(x)]=!0,a.logger.warn('key "'.concat(l,'" for languages "').concat(w.join(", "),`" won't get resolved as namespace "`).concat(p,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),w.forEach(function(O){if(!a.isValidLookup(s)){u=O;var S=[v];if(a.i18nFormat&&a.i18nFormat.addLookupKeys)a.i18nFormat.addLookupKeys(S,v,O,x,o);else{var j;y&&(j=a.pluralResolver.getSuffix(O,o.count,o));var T="".concat(a.options.pluralSeparator,"zero");if(y&&(S.push(v+j),g&&S.push(v+T)),h){var E="".concat(v).concat(a.options.contextSeparator).concat(o.context);S.push(E),y&&(S.push(E+j),g&&S.push(E+T))}}for(var F;F=S.pop();)a.isValidLookup(s)||(f=F,s=a.getResource(O,x,F,o))}}))})}}),{res:s,usedKey:l,exactUsedKey:f,usedLng:u,usedNS:p}}},{key:"isValidLookup",value:function(r){return r!==void 0&&!(!this.options.returnNull&&r===null)&&!(!this.options.returnEmptyString&&r==="")}},{key:"getResource",value:function(r,a,o){var s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(r,a,o,s):this.resourceStore.getResource(r,a,o,s)}}],[{key:"hasDefaultValue",value:function(r){var a="defaultValue";for(var o in r)if(Object.prototype.hasOwnProperty.call(r,o)&&a===o.substring(0,a.length)&&r[o]!==void 0)return!0;return!1}}]),t}(Be);function ar(i){return i.charAt(0).toUpperCase()+i.slice(1)}var on=function(){function i(e){te(this,i),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Se.create("languageUtils")}return re(i,[{key:"getScriptPartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return null;var n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}},{key:"getLanguagePartFromCode",value:function(t){if(!t||t.indexOf("-")<0)return t;var n=t.split("-");return this.formatLanguageCode(n[0])}},{key:"formatLanguageCode",value:function(t){if(typeof t=="string"&&t.indexOf("-")>-1){var n=["hans","hant","latn","cyrl","cans","mong","arab"],r=t.split("-");return this.options.lowerCaseLng?r=r.map(function(a){return a.toLowerCase()}):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=ar(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=ar(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=ar(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}},{key:"isSupportedCode",value:function(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}},{key:"getBestMatchFromCodes",value:function(t){var n=this;if(!t)return null;var r;return t.forEach(function(a){if(!r){var o=n.formatLanguageCode(a);(!n.options.supportedLngs||n.isSupportedCode(o))&&(r=o)}}),!r&&this.options.supportedLngs&&t.forEach(function(a){if(!r){var o=n.getLanguagePartFromCode(a);if(n.isSupportedCode(o))return r=o;r=n.options.supportedLngs.find(function(s){if(s===o)return s;if(!(s.indexOf("-")<0&&o.indexOf("-")<0)&&s.indexOf(o)===0)return s})}}),r||(r=this.getFallbackCodes(this.options.fallbackLng)[0]),r}},{key:"getFallbackCodes",value:function(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!n)return t.default||[];var r=t[n];return r||(r=t[this.getScriptPartFromCode(n)]),r||(r=t[this.formatLanguageCode(n)]),r||(r=t[this.getLanguagePartFromCode(n)]),r||(r=t.default),r||[]}},{key:"toResolveHierarchy",value:function(t,n){var r=this,a=this.getFallbackCodes(n||this.options.fallbackLng||[],t),o=[],s=function(f){!f||(r.isSupportedCode(f)?o.push(f):r.logger.warn("rejecting language code not found in supportedLngs: ".concat(f)))};return typeof t=="string"&&t.indexOf("-")>-1?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(t))):typeof t=="string"&&s(this.formatLanguageCode(t)),a.forEach(function(l){o.indexOf(l)<0&&s(r.formatLanguageCode(l))}),o}}]),i}(),Ji=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],qi={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}},Yi=["v1","v2","v3"],sn={zero:0,one:1,two:2,few:3,many:4,other:5};function Xi(){var i={};return Ji.forEach(function(e){e.lngs.forEach(function(t){i[t]={numbers:e.nr,plurals:qi[e.fc]}})}),i}var Gi=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};te(this,i),this.languageUtils=e,this.options=t,this.logger=Se.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl=="undefined"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Xi()}return re(i,[{key:"addRule",value:function(t,n){this.rules[t]=n}},{key:"getRule",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(t,{type:n.ordinal?"ordinal":"cardinal"})}catch(r){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}},{key:"needsPlural",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=this.getRule(t,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,r).map(function(a){return"".concat(n).concat(a)})}},{key:"getSuffixes",value:function(t){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=this.getRule(t,r);return a?this.shouldUseIntlApi()?a.resolvedOptions().pluralCategories.sort(function(o,s){return sn[o]-sn[s]}).map(function(o){return"".concat(n.options.prepend).concat(o)}):a.numbers.map(function(o){return n.getSuffix(t,o,r)}):[]}},{key:"getSuffix",value:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this.getRule(t,r);return a?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(a.select(n)):this.getSuffixRetroCompatible(a,n):(this.logger.warn("no plural rule found for: ".concat(t)),"")}},{key:"getSuffixRetroCompatible",value:function(t,n){var r=this,a=t.noAbs?t.plurals(n):t.plurals(Math.abs(n)),o=t.numbers[a];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));var s=function(){return r.options.prepend&&o.toString()?r.options.prepend+o.toString():o.toString()};return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?"_plural_".concat(o.toString()):s():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?s():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}},{key:"shouldUseIntlApi",value:function(){return!Yi.includes(this.options.compatibilityJSON)}}]),i}();function ln(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function me(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ln(Object(t),!0).forEach(function(n){Oe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):ln(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function un(i,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,a=Bi(i,e,t);return!a&&r&&typeof t=="string"&&(a=kt(i,t,n),a===void 0&&(a=kt(e,t,n))),a}var Qi=function(){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te(this,i),this.logger=Se.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(t){return t},this.init(e)}return re(i,[{key:"init",value:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});var n=t.interpolation;this.escape=n.escape!==void 0?n.escape:Vi,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?nt(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?nt(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?nt(n.nestingPrefix):n.nestingPrefixEscaped||nt("$t("),this.nestingSuffix=n.nestingSuffix?nt(n.nestingSuffix):n.nestingSuffixEscaped||nt(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");var n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");var r="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(r,"g")}},{key:"interpolate",value:function(t,n,r,a){var o=this,s,l,f,u=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function p(y){return y.replace(/\$/g,"$$$$")}var d=function(g){if(g.indexOf(o.formatSeparator)<0){var h=un(n,u,g,o.options.keySeparator,o.options.ignoreJSONStructure);return o.alwaysFormat?o.format(h,void 0,r,me(me(me({},a),n),{},{interpolationkey:g})):h}var w=g.split(o.formatSeparator),x=w.shift().trim(),O=w.join(o.formatSeparator).trim();return o.format(un(n,u,x,o.options.keySeparator,o.options.ignoreJSONStructure),O,r,me(me(me({},a),n),{},{interpolationkey:x}))};this.resetRegExp();var c=a&&a.missingInterpolationHandler||this.options.missingInterpolationHandler,v=a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,b=[{regex:this.regexpUnescape,safeValue:function(g){return p(g)}},{regex:this.regexp,safeValue:function(g){return o.escapeValue?p(o.escape(g)):p(g)}}];return b.forEach(function(y){for(f=0;s=y.regex.exec(t);){var g=s[1].trim();if(l=d(g),l===void 0)if(typeof c=="function"){var h=c(t,s,a);l=typeof h=="string"?h:""}else if(a&&Object.prototype.hasOwnProperty.call(a,g))l="";else if(v){l=s[0];continue}else o.logger.warn("missed to pass in variable ".concat(g," for interpolating ").concat(t)),l="";else typeof l!="string"&&!o.useRawValueToEscape&&(l=Gr(l));var w=y.safeValue(l);if(t=t.replace(s[0],w),v?(y.regex.lastIndex+=l.length,y.regex.lastIndex-=s[0].length):y.regex.lastIndex=0,f++,f>=o.maxReplaces)break}}),t}},{key:"nest",value:function(t,n){var r=this,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,s,l;function f(c,v){var b=this.nestingOptionsSeparator;if(c.indexOf(b)<0)return c;var y=c.split(new RegExp("".concat(b,"[ ]*{"))),g="{".concat(y[1]);c=y[0],g=this.interpolate(g,l);var h=g.match(/'/g),w=g.match(/"/g);(h&&h.length%2==0&&!w||w.length%2!=0)&&(g=g.replace(/'/g,'"'));try{l=JSON.parse(g),v&&(l=me(me({},v),l))}catch(x){return this.logger.warn("failed parsing options string in nesting for key ".concat(c),x),"".concat(c).concat(b).concat(g)}return delete l.defaultValue,c}for(;o=this.nestingRegexp.exec(t);){var u=[];l=me({},a),l=l.replace&&typeof l.replace!="string"?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;var p=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){var d=o[1].split(this.formatSeparator).map(function(c){return c.trim()});o[1]=d.shift(),u=d,p=!0}if(s=n(f.call(this,o[1].trim(),l),l),s&&o[0]===t&&typeof s!="string")return s;typeof s!="string"&&(s=Gr(s)),s||(this.logger.warn("missed to resolve ".concat(o[1]," for nesting ").concat(t)),s=""),p&&(s=u.reduce(function(c,v){return r.format(c,v,a.lng,me(me({},a),{},{interpolationkey:o[1].trim()}))},s.trim())),t=t.replace(o[0],s),this.regexp.lastIndex=0}return t}}]),i}();function pn(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Ce(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?pn(Object(t),!0).forEach(function(n){Oe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Zi(i){var e=i.toLowerCase().trim(),t={};if(i.indexOf("(")>-1){var n=i.split("(");e=n[0].toLowerCase().trim();var r=n[1].substring(0,n[1].length-1);if(e==="currency"&&r.indexOf(":")<0)t.currency||(t.currency=r.trim());else if(e==="relativetime"&&r.indexOf(":")<0)t.range||(t.range=r.trim());else{var a=r.split(";");a.forEach(function(o){if(!!o){var s=o.split(":"),l=nr(s),f=l[0],u=l.slice(1),p=u.join(":").trim().replace(/^'+|'+$/g,"");t[f.trim()]||(t[f.trim()]=p),p==="false"&&(t[f.trim()]=!1),p==="true"&&(t[f.trim()]=!0),isNaN(p)||(t[f.trim()]=parseInt(p,10))}})}}return{formatName:e,formatOptions:t}}function it(i){var e={};return function(n,r,a){var o=r+JSON.stringify(a),s=e[o];return s||(s=i(r,a),e[o]=s),s(n)}}var ea=function(){function i(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};te(this,i),this.logger=Se.create("formatter"),this.options=e,this.formats={number:it(function(t,n){var r=new Intl.NumberFormat(t,Ce({},n));return function(a){return r.format(a)}}),currency:it(function(t,n){var r=new Intl.NumberFormat(t,Ce(Ce({},n),{},{style:"currency"}));return function(a){return r.format(a)}}),datetime:it(function(t,n){var r=new Intl.DateTimeFormat(t,Ce({},n));return function(a){return r.format(a)}}),relativetime:it(function(t,n){var r=new Intl.RelativeTimeFormat(t,Ce({},n));return function(a){return r.format(a,n.range||"day")}}),list:it(function(t,n){var r=new Intl.ListFormat(t,Ce({},n));return function(a){return r.format(a)}})},this.init(e)}return re(i,[{key:"init",value:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},r=n.interpolation;this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||","}},{key:"add",value:function(t,n){this.formats[t.toLowerCase().trim()]=n}},{key:"addCached",value:function(t,n){this.formats[t.toLowerCase().trim()]=it(n)}},{key:"format",value:function(t,n,r){var a=this,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},s=n.split(this.formatSeparator),l=s.reduce(function(f,u){var p=Zi(u),d=p.formatName,c=p.formatOptions;if(a.formats[d]){var v=f;try{var b=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},y=b.locale||b.lng||o.locale||o.lng||r;v=a.formats[d](f,y,Ce(Ce(Ce({},c),o),b))}catch(g){a.logger.warn(g)}return v}else a.logger.warn("there was no format function for ".concat(d));return f},t);return l}}]),i}();function fn(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function cn(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fn(Object(t),!0).forEach(function(n){Oe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):fn(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function ta(i){var e=ra();return function(){var n=ne(i),r;if(e){var a=ne(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return He(this,r)}}function ra(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function na(i,e){i.pending[e]!==void 0&&(delete i.pending[e],i.pendingCount--)}var ia=function(i){rt(t,i);var e=ta(t);function t(n,r,a){var o,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return te(this,t),o=e.call(this),Rt&&Be.call(de(o)),o.backend=n,o.store=r,o.services=a,o.languageUtils=a.languageUtils,o.options=s,o.logger=Se.create("backendConnector"),o.waitingReads=[],o.maxParallelReads=s.maxParallelReads||10,o.readingCalls=0,o.maxRetries=s.maxRetries>=0?s.maxRetries:5,o.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,o.state={},o.queue=[],o.backend&&o.backend.init&&o.backend.init(a,s.backend,s),o}return re(t,[{key:"queueLoad",value:function(r,a,o,s){var l=this,f={},u={},p={},d={};return r.forEach(function(c){var v=!0;a.forEach(function(b){var y="".concat(c,"|").concat(b);!o.reload&&l.store.hasResourceBundle(c,b)?l.state[y]=2:l.state[y]<0||(l.state[y]===1?u[y]===void 0&&(u[y]=!0):(l.state[y]=1,v=!1,u[y]===void 0&&(u[y]=!0),f[y]===void 0&&(f[y]=!0),d[b]===void 0&&(d[b]=!0)))}),v||(p[c]=!0)}),(Object.keys(f).length||Object.keys(u).length)&&this.queue.push({pending:u,pendingCount:Object.keys(u).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(f),pending:Object.keys(u),toLoadLanguages:Object.keys(p),toLoadNamespaces:Object.keys(d)}}},{key:"loaded",value:function(r,a,o){var s=r.split("|"),l=s[0],f=s[1];a&&this.emit("failedLoading",l,f,a),o&&this.store.addResourceBundle(l,f,o),this.state[r]=a?-1:2;var u={};this.queue.forEach(function(p){Ii(p.loaded,[l],f),na(p,r),a&&p.errors.push(a),p.pendingCount===0&&!p.done&&(Object.keys(p.loaded).forEach(function(d){u[d]||(u[d]={});var c=p.loaded[d];c.length&&c.forEach(function(v){u[d][v]===void 0&&(u[d][v]=!0)})}),p.done=!0,p.errors.length?p.callback(p.errors):p.callback())}),this.emit("loaded",u),this.queue=this.queue.filter(function(p){return!p.done})}},{key:"read",value:function(r,a,o){var s=this,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,u=arguments.length>5?arguments[5]:void 0;if(!r.length)return u(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:r,ns:a,fcName:o,tried:l,wait:f,callback:u});return}this.readingCalls++;var p=function(b,y){if(s.readingCalls--,s.waitingReads.length>0){var g=s.waitingReads.shift();s.read(g.lng,g.ns,g.fcName,g.tried,g.wait,g.callback)}if(b&&y&&l<s.maxRetries){setTimeout(function(){s.read.call(s,r,a,o,l+1,f*2,u)},f);return}u(b,y)},d=this.backend[o].bind(this.backend);if(d.length===2){try{var c=d(r,a);c&&typeof c.then=="function"?c.then(function(v){return p(null,v)}).catch(p):p(null,c)}catch(v){p(v)}return}return d(r,a,p)}},{key:"prepareLoading",value:function(r,a){var o=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},l=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),l&&l();typeof r=="string"&&(r=this.languageUtils.toResolveHierarchy(r)),typeof a=="string"&&(a=[a]);var f=this.queueLoad(r,a,s,l);if(!f.toLoad.length)return f.pending.length||l(),null;f.toLoad.forEach(function(u){o.loadOne(u)})}},{key:"load",value:function(r,a,o){this.prepareLoading(r,a,{},o)}},{key:"reload",value:function(r,a,o){this.prepareLoading(r,a,{reload:!0},o)}},{key:"loadOne",value:function(r){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",s=r.split("|"),l=s[0],f=s[1];this.read(l,f,"read",void 0,void 0,function(u,p){u&&a.logger.warn("".concat(o,"loading namespace ").concat(f," for language ").concat(l," failed"),u),!u&&p&&a.logger.log("".concat(o,"loaded namespace ").concat(f," for language ").concat(l),p),a.loaded(r,u,p)})}},{key:"saveMissing",value:function(r,a,o,s,l){var f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},u=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(a)){this.logger.warn('did not save key "'.concat(o,'" as the namespace "').concat(a,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(o==null||o==="")){if(this.backend&&this.backend.create){var p=cn(cn({},f),{},{isUpdate:l}),d=this.backend.create.bind(this.backend);if(d.length<6)try{var c;d.length===5?c=d(r,a,o,s,p):c=d(r,a,o,s),c&&typeof c.then=="function"?c.then(function(v){return u(null,v)}).catch(u):u(null,c)}catch(v){u(v)}else d(r,a,o,s,u,p)}!r||!r[0]||this.store.addResource(r[0],a,o,s)}}}]),t}(Be);function dn(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var t={};if(z(e[1])==="object"&&(t=e[1]),typeof e[1]=="string"&&(t.defaultValue=e[1]),typeof e[2]=="string"&&(t.tDescription=e[2]),z(e[2])==="object"||z(e[3])==="object"){var n=e[3]||e[2];Object.keys(n).forEach(function(r){t[r]=n[r]})}return t},interpolation:{escapeValue:!0,format:function(e,t,n,r){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function mn(i){return typeof i.ns=="string"&&(i.ns=[i.ns]),typeof i.fallbackLng=="string"&&(i.fallbackLng=[i.fallbackLng]),typeof i.fallbackNS=="string"&&(i.fallbackNS=[i.fallbackNS]),i.supportedLngs&&i.supportedLngs.indexOf("cimode")<0&&(i.supportedLngs=i.supportedLngs.concat(["cimode"])),i}function gn(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Ne(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?gn(Object(t),!0).forEach(function(n){Oe(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):gn(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function aa(i){var e=oa();return function(){var n=ne(i),r;if(e){var a=ne(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return He(this,r)}}function oa(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(i){return!1}}function It(){}function sa(i){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(i));e.forEach(function(t){typeof i[t]=="function"&&(i[t]=i[t].bind(i))})}var Bt=function(i){rt(t,i);var e=aa(t);function t(){var n,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(te(this,t),n=e.call(this),Rt&&Be.call(de(n)),n.options=mn(r),n.services={},n.logger=Se,n.modules={external:[]},sa(de(n)),a&&!n.isInitialized&&!r.isClone){if(!n.options.initImmediate)return n.init(r,a),He(n,de(n));setTimeout(function(){n.init(r,a)},0)}return n}return re(t,[{key:"init",value:function(){var r=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;typeof a=="function"&&(o=a,a={}),!a.defaultNS&&a.defaultNS!==!1&&a.ns&&(typeof a.ns=="string"?a.defaultNS=a.ns:a.ns.indexOf("translation")<0&&(a.defaultNS=a.ns[0]));var s=dn();this.options=Ne(Ne(Ne({},s),this.options),mn(a)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Ne(Ne({},s.interpolation),this.options.interpolation)),a.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=a.keySeparator),a.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=a.nsSeparator);function l(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?Se.init(l(this.modules.logger),this.options):Se.init(null,this.options);var f;this.modules.formatter?f=this.modules.formatter:typeof Intl!="undefined"&&(f=ea);var u=new on(this.options);this.store=new Ui(this.options.resources,this.options);var p=this.services;p.logger=Se,p.resourceStore=this.store,p.languageUtils=u,p.pluralResolver=new Gi(u,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),f&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(p.formatter=l(f),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new Qi(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new ia(l(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(g){for(var h=arguments.length,w=new Array(h>1?h-1:0),x=1;x<h;x++)w[x-1]=arguments[x];r.emit.apply(r,[g].concat(w))}),this.modules.languageDetector&&(p.languageDetector=l(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=l(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new an(this.services,this.options),this.translator.on("*",function(g){for(var h=arguments.length,w=new Array(h>1?h-1:0),x=1;x<h;x++)w[x-1]=arguments[x];r.emit.apply(r,[g].concat(w))}),this.modules.external.forEach(function(g){g.init&&g.init(r)})}if(this.format=this.options.interpolation.format,o||(o=It),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var c=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];c.forEach(function(g){r[g]=function(){var h;return(h=r.store)[g].apply(h,arguments)}});var v=["addResource","addResources","addResourceBundle","removeResourceBundle"];v.forEach(function(g){r[g]=function(){var h;return(h=r.store)[g].apply(h,arguments),r}});var b=bt(),y=function(){var h=function(x,O){r.isInitialized&&!r.initializedStoreOnce&&r.logger.warn("init: i18next is already initialized. You should call init just once!"),r.isInitialized=!0,r.options.isClone||r.logger.log("initialized",r.options),r.emit("initialized",r.options),b.resolve(O),o(x,O)};if(r.languages&&r.options.compatibilityAPI!=="v1"&&!r.isInitialized)return h(null,r.t.bind(r));r.changeLanguage(r.options.lng,h)};return this.options.resources||!this.options.initImmediate?y():setTimeout(y,0),b}},{key:"loadResources",value:function(r){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:It,s=o,l=typeof r=="string"?r:this.language;if(typeof r=="function"&&(s=r),!this.options.resources||this.options.partialBundledLanguages){if(l&&l.toLowerCase()==="cimode")return s();var f=[],u=function(c){if(!!c){var v=a.services.languageUtils.toResolveHierarchy(c);v.forEach(function(b){f.indexOf(b)<0&&f.push(b)})}};if(l)u(l);else{var p=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);p.forEach(function(d){return u(d)})}this.options.preload&&this.options.preload.forEach(function(d){return u(d)}),this.services.backendConnector.load(f,this.options.ns,function(d){!d&&!a.resolvedLanguage&&a.language&&a.setResolvedLanguage(a.language),s(d)})}else s(null)}},{key:"reloadResources",value:function(r,a,o){var s=bt();return r||(r=this.languages),a||(a=this.options.ns),o||(o=It),this.services.backendConnector.reload(r,a,function(l){s.resolve(),o(l)}),s}},{key:"use",value:function(r){if(!r)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!r.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return r.type==="backend"&&(this.modules.backend=r),(r.type==="logger"||r.log&&r.warn&&r.error)&&(this.modules.logger=r),r.type==="languageDetector"&&(this.modules.languageDetector=r),r.type==="i18nFormat"&&(this.modules.i18nFormat=r),r.type==="postProcessor"&&tn.addPostProcessor(r),r.type==="formatter"&&(this.modules.formatter=r),r.type==="3rdParty"&&this.modules.external.push(r),this}},{key:"setResolvedLanguage",value:function(r){if(!(!r||!this.languages)&&!(["cimode","dev"].indexOf(r)>-1))for(var a=0;a<this.languages.length;a++){var o=this.languages[a];if(!(["cimode","dev"].indexOf(o)>-1)&&this.store.hasLanguageSomeTranslations(o)){this.resolvedLanguage=o;break}}}},{key:"changeLanguage",value:function(r,a){var o=this;this.isLanguageChangingTo=r;var s=bt();this.emit("languageChanging",r);var l=function(d){o.language=d,o.languages=o.services.languageUtils.toResolveHierarchy(d),o.resolvedLanguage=void 0,o.setResolvedLanguage(d)},f=function(d,c){c?(l(c),o.translator.changeLanguage(c),o.isLanguageChangingTo=void 0,o.emit("languageChanged",c),o.logger.log("languageChanged",c)):o.isLanguageChangingTo=void 0,s.resolve(function(){return o.t.apply(o,arguments)}),a&&a(d,function(){return o.t.apply(o,arguments)})},u=function(d){!r&&!d&&o.services.languageDetector&&(d=[]);var c=typeof d=="string"?d:o.services.languageUtils.getBestMatchFromCodes(d);c&&(o.language||l(c),o.translator.language||o.translator.changeLanguage(c),o.services.languageDetector&&o.services.languageDetector.cacheUserLanguage&&o.services.languageDetector.cacheUserLanguage(c)),o.loadResources(c,function(v){f(v,c)})};return!r&&this.services.languageDetector&&!this.services.languageDetector.async?u(this.services.languageDetector.detect()):!r&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(u):this.services.languageDetector.detect(u):u(r),s}},{key:"getFixedT",value:function(r,a,o){var s=this,l=function f(u,p){var d;if(z(p)!=="object"){for(var c=arguments.length,v=new Array(c>2?c-2:0),b=2;b<c;b++)v[b-2]=arguments[b];d=s.options.overloadTranslationOptionHandler([u,p].concat(v))}else d=Ne({},p);d.lng=d.lng||f.lng,d.lngs=d.lngs||f.lngs,d.ns=d.ns||f.ns,d.keyPrefix=d.keyPrefix||o||f.keyPrefix;var y=s.options.keySeparator||".",g;return d.keyPrefix&&Array.isArray(u)?g=u.map(function(h){return"".concat(d.keyPrefix).concat(y).concat(h)}):g=d.keyPrefix?"".concat(d.keyPrefix).concat(y).concat(u):u,s.t(g,d)};return typeof r=="string"?l.lng=r:l.lngs=r,l.ns=a,l.keyPrefix=o,l}},{key:"t",value:function(){var r;return this.translator&&(r=this.translator).translate.apply(r,arguments)}},{key:"exists",value:function(){var r;return this.translator&&(r=this.translator).exists.apply(r,arguments)}},{key:"setDefaultNamespace",value:function(r){this.options.defaultNS=r}},{key:"hasLoadedNamespace",value:function(r){var a=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var s=o.lng||this.resolvedLanguage||this.languages[0],l=this.options?this.options.fallbackLng:!1,f=this.languages[this.languages.length-1];if(s.toLowerCase()==="cimode")return!0;var u=function(c,v){var b=a.services.backendConnector.state["".concat(c,"|").concat(v)];return b===-1||b===2};if(o.precheck){var p=o.precheck(this,u);if(p!==void 0)return p}return!!(this.hasResourceBundle(s,r)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||u(s,r)&&(!l||u(f,r)))}},{key:"loadNamespaces",value:function(r,a){var o=this,s=bt();return this.options.ns?(typeof r=="string"&&(r=[r]),r.forEach(function(l){o.options.ns.indexOf(l)<0&&o.options.ns.push(l)}),this.loadResources(function(l){s.resolve(),a&&a(l)}),s):(a&&a(),Promise.resolve())}},{key:"loadLanguages",value:function(r,a){var o=bt();typeof r=="string"&&(r=[r]);var s=this.options.preload||[],l=r.filter(function(f){return s.indexOf(f)<0});return l.length?(this.options.preload=s.concat(l),this.loadResources(function(f){o.resolve(),a&&a(f)}),o):(a&&a(),Promise.resolve())}},{key:"dir",value:function(r){if(r||(r=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!r)return"rtl";var a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],o=this.services&&this.services.languageUtils||new on(dn());return a.indexOf(o.getLanguagePartFromCode(r))>-1||r.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var r=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:It,s=Ne(Ne(Ne({},this.options),a),{isClone:!0}),l=new t(s);(a.debug!==void 0||a.prefix!==void 0)&&(l.logger=l.logger.clone(a));var f=["store","services","language"];return f.forEach(function(u){l[u]=r[u]}),l.services=Ne({},this.services),l.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l.translator=new an(l.services,l.options),l.translator.on("*",function(u){for(var p=arguments.length,d=new Array(p>1?p-1:0),c=1;c<p;c++)d[c-1]=arguments[c];l.emit.apply(l,[u].concat(d))}),l.init(s,o),l.translator.options=l.options,l.translator.backendConnector.services.utils={hasLoadedNamespace:l.hasLoadedNamespace.bind(l)},l}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),t}(Be);Oe(Bt,"createInstance",function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Bt(i,e)});var m=Bt.createInstance();m.createInstance=Bt.createInstance;var Lo=m.createInstance,Ao=m.dir,Ro=m.init,ko=m.loadResources,Do=m.reloadResources,Io=m.use,Bo=m.changeLanguage,Mo=m.getFixedT,Vo=m.t,_o=m.exists,$o=m.setDefaultNamespace,Wo=m.hasLoadedNamespace,Ho=m.loadNamespaces,Uo=m.loadLanguages;var ke=Ee(require("obsidian"));var hn=i=>{if(typeof i=="object"&&i!==null){if(typeof Object.getPrototypeOf=="function"){let e=Object.getPrototypeOf(i);return e===Object.prototype||e===null}return Object.prototype.toString.call(i)==="[object Object]"}return!1},je=(...i)=>i.reduce((e,t)=>{if(Array.isArray(t))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(t).forEach(n=>{["__proto__","constructor","prototype"].includes(n)||(Array.isArray(e[n])&&Array.isArray(t[n])?e[n]=je.options.mergeArrays?je.options.uniqueArrayItems?Array.from(new Set(e[n].concat(t[n]))):[...e[n],...t[n]]:t[n]:hn(e[n])&&hn(t[n])?e[n]=je(e[n],t[n]):e[n]=t[n]===void 0?je.options.allowUndefinedOverrides?t[n]:e[n]:t[n])}),e},{}),or={allowUndefinedOverrides:!0,mergeArrays:!0,uniqueArrayItems:!0};je.options=or;je.withOptions=(i,...e)=>{je.options=Object.assign(Object.assign({},or),i);let t=je(...e);return je.options=or,t};var sr=je;var pr=Ee(require("obsidian"));var lr={};Gt(lr,{allFolder:()=>vn,commandName:()=>yn,common:()=>bn,default:()=>la,down:()=>xn,duplicate:()=>wn,editFolder:()=>On,error:()=>Sn,example:()=>Nn,log:()=>jn,path:()=>Pn,quickSwitcher:()=>Fn,remove:()=>En,template:()=>Cn,title:()=>Tn,up:()=>Ln,variable:()=>An});var vn={default:{title:"Default template",tooltip:"Set the default template for all folders if they are not registered"},enable:"Enable the plugin all folders",filterAnyFolderCommand:{desc:`Will remove user-defined templates from the "all folders" list. 
If disabled, will display defined templates with their paths rather than their command name.`,title:'Filter the list of the "all folders" command'},listAllModals:"List all folders in quick-switcher, instead to open another modal"},yn="Command Name",bn={date:"Date",example:"Example:",name:"The name",string:"String",submit:"Submit",value:"The value"},xn="Move down",wn="Duplicate",On={add:"Add folder",alreadyExist:{desc:"If you do not open the notes upon creation, it still allows you to open the file if it already exists.",focus:"Focus on the already existing note",title:"Default opening of notes that already exist"},default:"Default template for all folders if they are not registered",fileName:{desc:"The name will be incremented if the name already exists.",title:"Choose how notes will be named."},focus:{desc:"Focus on the new note after creation",title:"Focus"},increments:{desc:"Disabled, will not increment the name if the file already exists and open the already existing note instead.",title:"Increments the name if the file already exists"},opening:{desc:"How note will be opened after creation",dropDown:{current:"Current Tab",newTab:"New Tab",newWindow:"New Window",nothing:"Do not open",split:"Split Pane"},head:"Opening",nothing:"Setting for existing notes",split:{horizontal:"Horizontal",vertical:"Vertical"},title:"Default Opening"},other:{setting:{desc:'Add a button in the file menu to create a note in this folder. Only works if the folder path contains "{{current}}"',title:"File menu"},title:"Other"},template:{dropDown:{folderName:"Folder Name",none:"None"},title:"Choose a template if you want to add something before or after the filename."},templater:{setting:{desc:"Allow to trigger a template from the templater plugin",placeholder:"template",title:"Template path"},title:"Templater settings"},title:"Edit Folder specific settings"},Sn={date:"Invalid date format, please use a valid format.",duplicate:"{{- name}} already exists.",empty:"{{- name}} cannot be empty",fileName:"Invalid file name, please use a filename if you don't use a template.",invalidExpression:'File name cannot contain any of the following characters: *, ", , /, <, >, :, |, ?',pathNoFound:"The folder {{- path}} doesn't exists.",templateNotFile:"{{- path}} is not a valid file.",templateNotFound:"{{- path}} doesn't exists."},Nn="Example: path/to/path",jn="Creating note in path {{- path}}, with name {{- name}}",Pn="folder-path",Fn={anyFolder:"Quick Switcher (any folder)",simple:"Quick Switcher"},En="Remove Folder",Cn={desc:"The filename can be empty if you use a template.",dropDown:{date:{desc:"Valid format can be found ",here:"here",url:"https://momentjs.com/docs/#/displaying/format/"}},header:"Template",position:{append:"Append",prepend:"Prepend",title:"Choose where to add the template."},separator:"Separator"},Tn="Folders",Ln="Move up",An={add:"Add new variable",current:{desc:"You can use the {{current}} variable to use the current folder.",warning:"\u26A0\uFE0F You need to have a file already open to use the command."},desc:{explain:"Custom variables will be replaced by their value upon creation.",filename:"You can use custom variables in the folder path. ",insensitive:'Without a regex, the name will be case-sensitive, including the "date" type.',regex:{info:'To use a name with a RegEx, enclose it by "/"',warn:'Regex only work on "string" type.'},warn:{usage:'To use the variable, you need to enclose the name in "{{}}" in the folder path.'}},name:"Name",remove:"Remove variable",title:"Manage custom variables",value:"Value"},la={allFolder:vn,commandName:yn,common:bn,down:xn,duplicate:wn,editFolder:On,error:Sn,example:Nn,log:jn,path:Pn,quickSwitcher:Fn,remove:En,template:Cn,title:Tn,up:Ln,variable:An};var ur={};Gt(ur,{allFolder:()=>Rn,commandName:()=>kn,common:()=>Dn,default:()=>ua,down:()=>In,duplicate:()=>Bn,editFolder:()=>Mn,error:()=>Vn,example:()=>_n,log:()=>$n,moveUp:()=>Wn,path:()=>Hn,quickSwitcher:()=>Un,remove:()=>zn,template:()=>Kn,title:()=>Jn,up:()=>qn,variable:()=>Yn});var Rn={default:{title:"Template par d\xE9faut",tooltip:"D\xE9finir le mod\xE8le par d\xE9faut pour tous les dossiers s'ils ne sont pas enregistr\xE9s"},enable:"Activer le plugin pour tous les dossier",filterAnyFolderCommand:{desc:`Supprimera de la liste "tous les dossiers" les templates d\xE9finies par l'utilisateur. Si d\xE9sactiver, affichera les template d\xE9finies avec leur chemins plut\xF4t que leur nom de commande.`,title:'Filtrer la liste de la commande "tous les dossiers"'},listAllModals:"Lister tous les dossiers dans le quick-switcher, au lieu d'ouvrir un autre menu"},kn="Nom de la commande",Dn={date:"Date",example:"Exemple :",name:"Le nom",string:"Texte",submit:"Valider",value:"La valeur"},In="D\xE9placer vers le bas",Bn="Dupliquer",Mn={add:"Ajouter un dossier",alreadyExist:{desc:"Dans le cas o\xF9 vous n'ouvrez pas les notes \xE0 la cr\xE9ation, vous permet tout de m\xEAme d'ouvrir le fichier s'il existe d\xE9j\xE0.",focus:"Focus sur la note d\xE9j\xE0 existante",title:"Ouverture par d\xE9faut des notes qui existent d\xE9j\xE0"},default:"Template par d\xE9faut pour tous les dossiers s'ils ne sont pas enregistr\xE9s",fileName:{desc:"Le nom sera incr\xE9ment\xE9 si le nom existe d\xE9j\xE0.",title:"Choisissez la fa\xE7on dont les notes seront nomm\xE9es."},focus:{desc:"Focus sur la nouvelle note apr\xE8s sa cr\xE9ation",title:"Focus"},increments:{desc:"D\xE9sactiv\xE9, n'incr\xE9mente pas le nom si le fichier existe d\xE9j\xE0 et ouvre la note existante \xE0 la place.",title:"Incr\xE9mentation"},opening:{desc:"Comment la note sera ouverte apr\xE8s sa cr\xE9ation",dropDown:{current:"Onglet courant",newTab:"Nouvel onglet",newWindow:"Nouvelle fen\xEAtre",nothing:"Ne pas ouvrir",split:"Fen\xEAtre divis\xE9e"},head:"Ouverture",nothing:"Param\xE8tre pour les notes d\xE9j\xE0 existantes",split:{horizontal:"Horizontale",vertical:"Verticale"},title:"Ouverture par d\xE9faut"},other:{setting:{desc:'Ajouter un bouton dans le menu fichier pour cr\xE9er une note dans ce dossier. Ne fonctionne que si le chemin du dossier contient "{{current}}"',title:'Menu "fichier"'},title:"Autre"},template:{dropDown:{folderName:"Nom du dossier",none:"Aucun"},title:"Choisissez un mod\xE8le si vous voulez ajouter quelque chose avant ou apr\xE8s le nom du fichier."},templater:{setting:{desc:"Permet d'utiliser une template du plugin templater",placeholder:"template",title:"Chemin de la template"},title:"Param\xE8tre de templater"},title:"Modifier les param\xE8tres sp\xE9cifiques au dossier"},Vn={date:"Format de date invalide, veuillez utiliser un format valide.",duplicate:"{{- name}} existe d\xE9j\xE0.",empty:"{{- name}} ne peut pas \xEAtre vide",fileName:"Nom de fichier invalide, veuillez utiliser un nom de fichier si vous n'utilisez pas de mod\xE8le.",invalidExpression:'Le nom du fichier ne peut contenir aucun des caract\xE8res suivants : *, ", , /, <, >, :, |, ?',pathNoFound:"Le dossier {{- path}} n'existe pas.",templateNotFile:"{{- path}} n'est pas un fichier valide.",templateNotFound:"{{- path}} n'existe pas."},_n="Exemple: chemin/vers/dossier",$n="Cr\xE9ation de la note dans le dossier {{- path}}, avec le nom {{- name}}.",Wn="D\xE9placer en haut",Hn="Chemin du dossier",Un={anyFolder:"Quick Switcher (tout dossier)",simple:"Quick Switcher"},zn="Supprimer le dossier",Kn={desc:"Le nom du fichier peut \xEAtre vide si vous utilisez un mod\xE8le.",dropDown:{date:{desc:"Les formats valides peuvent \xEAtre trouv\xE9s ",here:"ici",url:"https://momentjs.com/docs/#/displaying/format/"}},header:"Mod\xE8le",position:{append:"Ajouter apr\xE8s",prepend:"Ajouter avant",title:"Choisissez o\xF9 ajouter le mod\xE8le."},separator:"S\xE9parateur"},Jn="Dossiers",qn="D\xE9placer vers le haut",Yn={add:"Ajouter une nouvelle variable",current:{desc:"Vous pouvez utiliser la variable {{current}} pour utiliser le dossier actuel.",warning:"\u26A0\uFE0F Vous avez besoin d'avoir un fichier d\xE9j\xE0 ouvert pour utiliser la commande."},desc:{explain:"Les variables personnalis\xE9es seront remplac\xE9es par leurs valeurs lors de la cr\xE9ation.",filename:"Vous pouvez utiliser des variables personnalis\xE9es dans le chemin du fichier. ",insensitive:'Sans Regex, le nom sera sensible \xE0 la casse, y compris le type "date".',regex:{info:`Pour utiliser un nom avec un RegEx, il faut l'entourer de "/"`,warn:'Les regex ne fonctionne que sur le type "texte".'},warn:{usage:'Pour utiliser la variable, vous devez entourer son nom de "{{}}" dans le chemin du fichier.'}},name:"Nom",remove:"Supprimer la variable",title:"G\xE9rer les variables personnalis\xE9es",value:"Valeur"},ua={allFolder:Rn,commandName:kn,common:Dn,down:In,duplicate:Bn,editFolder:Mn,error:Vn,example:_n,log:$n,moveUp:Wn,path:Hn,quickSwitcher:Un,remove:zn,template:Kn,title:Jn,up:qn,variable:Yn};var fr={en:{translation:lr},fr:{translation:ur}},Xn=Object.keys(fr).find(i=>i==pr.moment.locale())?pr.moment.locale():"en";var P;(function(a){a.newTab="newTab",a.current="current",a.split="split",a.newWindow="newWindow",a.nothing="nothing"})(P||(P={}));var Ue;(function(t){t.horizontal="horizontal",t.vertical="vertical"})(Ue||(Ue={}));var J;(function(n){n.date="date",n.folderName="folderName",n.none="none"})(J||(J={}));var ge;(function(n){n.prepend="prepend",n.append="append",n.none="none"})(ge||(ge={}));var cr={folder:[],customVariables:[],timeOutForInlineTitle:50},ie={path:"",commandName:"",template:{type:J.none,format:"",position:ge.append,separator:"",increment:!0},fileName:"Untitled",opening:P.newTab,focused:!0,splitDefault:Ue.horizontal,alreadyExistOpening:{opening:P.newTab,splitDefault:Ue.horizontal,focused:!0},fileMenu:!1};var st=Ee(require("obsidian"));var L=Ee(require("obsidian"));var ae=Ee(require("obsidian"));function xt(i){return(0,ae.moment)((0,ae.moment)().format(i),i,!0).isValid()}function dr(i,e){return i.plugins.enabledPlugins.has("templater-obsidian")&&e.templater}function mr(i,e){let t=i.fileName;t=t.replace(".md","");let n=i.template,r=n.type,a=null;for(r===J.date?(n.format.trim().length===0&&(n.format="YYYY-MM-DD"),a=(0,ae.moment)().format(n.format)):r===J.folderName&&(a=(0,ae.normalizePath)(i.path).split("/").pop()),n.position===ge.prepend&&a?t=a+n.separator+t:n.position===ge.append&&a&&(t=t+n.separator+a);e.vault.getAbstractFileByPath((0,ae.normalizePath)(`${i.path}/${t}.md`))&&n.increment;){let o=t.match(/ \d+$/),s=o?parseInt(o[0])+1:1;t=`${t.replace(/ \d+$/,"")} ${s}`}return`${t}.md`}function gr(i,e){let t=[];for(let n of e)if(i.match(`{{${n.name}}}`))n.type==="string"?i=i.replace(`{{${n.name}}}`,n.value):i=i.replace(`{{${n.name}}}`,(0,ae.moment)().format(n.value)),t.push(!0);else if(n.name.match(/^\/.+\/[gimy]*$/)){let r=new RegExp(n.name.replace(/^\/(.+)\/[gimy]*$/,"{{$1}}"),n.name.replace(/^\/.+\/([gimy]*)$/,"$1"));i.match(r)&&(i=i.replace(r,n.value),t.push(!0))}return{path:i,hasBeenReplaced:t.length>0}}function Mt(i,e,t){let{settings:n,app:r}=t,{path:a,hasBeenReplaced:o}=gr(i.path,n.customVariables),s=e.parent?e.parent.path:"/";e instanceof ae.TFolder&&(s=e.path);let l=JSON.parse(JSON.stringify(i));l.path=(0,ae.normalizePath)(a.replace("{{current}}",`${s}/`));let f=(0,ae.normalizePath)(l.path),u=mr(l,r);return{folderPath:f,defaultName:u,hasBeenReplaced:o,currentFolder:l}}function Vt(i,e){var r,a;let t=i.metadataCache.getCache(e.path),n=i.workspace.getActiveViewOfType(L.MarkdownView);if(!(!n||!t)){if(e.heading){let o=(r=t.headings)==null?void 0:r.find(s=>s.heading===e.heading);o&&n.editor.setCursor(o.position.start.line)}else if(e.block){let o=(a=t.blocks)==null?void 0:a[e.block];o&&n.editor.setCursor(o.position.start.line)}}}function _t(i,e){var o,s,l,f;let t=i.match(/\^(.*)$/),n=t?t[1]:void 0;i=i.replace(/(\^.*)$/,"");let r=i.match(/#(.*)$/),a=r?r[1]:void 0;return i=i.replace(/(#.*)$/,""),{path:(f=(l=e.metadataCache.getFirstLinkpathDest((0,L.getLinkpath)(i),(s=(o=e.workspace.getActiveFile())==null?void 0:o.path)!=null?s:""))==null?void 0:l.path)!=null?f:i,heading:a,block:n}}function at(i,e,t=e.opening,n=e.splitDefault){switch(t){case P.split:return i.workspace.getLeaf("split",n);case P.newWindow:return i.workspace.getLeaf("window");case P.newTab:return i.workspace.getLeaf(!0);case P.nothing:return;default:return i.workspace.getLeaf(!1)}}function $t(i,e){let t;return i.workspace.iterateAllLeaves(n=>{let r=n.view.file;(r==null?void 0:r.path)===e.path&&(t=n)}),t}function wt(i,e,t=!1){return N(this,null,function*(){let{settings:n,app:r}=e,{path:a,hasBeenReplaced:o}=gr(i.path,n.customVariables),s=JSON.parse(JSON.stringify(i));s.path=(0,L.normalizePath)(a);let l=mr(s,r);if(!r.vault.getAbstractFileByPath(s.path)){if(o)yield r.vault.createFolder(s.path);else if(!t){new L.Notice(m.t("error.pathNoFound",{path:i.path})),n.folder=n.folder.filter(p=>p.commandName!==s.commandName),yield e.saveSettings(),yield e.addNewCommands(s.commandName,void 0);return}}console.log(m.t("log",{path:s.path,name:l}));let f=(0,L.normalizePath)(`${s.path}/${l}`),u=r.vault.getAbstractFileByPath(f);if(u instanceof L.TFile){if(s.opening!==P.nothing){let p=$t(r,u);p?(p.openFile(u,{active:s.focused}),Vt(r,_t(l,r))):(p=at(r,s,s.opening,s.splitDefault),yield p.openFile(u,{active:s.focused}))}else if(s.alreadyExistOpening.opening!==P.nothing){let p=$t(r,u);p?(p.openFile(u,{active:s.alreadyExistOpening.focused}),Vt(r,_t(l,r))):(p=at(r,s,s.alreadyExistOpening.opening,s.alreadyExistOpening.splitDefault),p&&(yield p.openFile(u,{active:s.alreadyExistOpening.focused})))}}else if(!u){let p=at(r,s);if(p){let d=yield r.vault.create(f,"");yield p.openFile(d,{active:s.focused}),yield e.triggerTemplater(d,s),yield Gn(p,r)}else if(dr(r,s)){let d=this.app.vault.getAbstractFileByPath(s.templater);if(!d||!(d instanceof L.TFile)){new L.Notice(m.t("error.templateNotFound",{path:s.templater}));return}let c=r.vault.getAbstractFileByPath((0,L.normalizePath)(s.path));r.plugins.plugins["templater-obsidian"].templater.create_new_note_from_template(d,c,l,!1)}else yield r.vault.create(f,"")}})}function ot(i,e,t){var d;let{settings:n,app:r}=t,{folderPath:a,defaultName:o,hasBeenReplaced:s,currentFolder:l}=Mt(i,e,t);if(!r.vault.getAbstractFileByPath(a))if(s)r.vault.createFolder(l.path);else{new L.Notice(m.t("error.pathNoFound",{path:l.path}));return}console.log(m.t("log",{path:l.path,name:o}));let f=at(r,l),u=(0,L.normalizePath)(`${l.path}/${o}`),p=r.vault.getAbstractFileByPath(u);if(p instanceof L.TFile){if(l.opening!==P.nothing){let c=$t(r,p);c?(c.openFile(p,{active:l.focused}),Vt(r,_t(o,r))):(c=at(r,l,l.opening,l.splitDefault),c.openFile(p,{active:l.focused}))}else if(l.alreadyExistOpening.opening!==P.nothing){let c=$t(r,p);c?(c.openFile(p,{active:l.alreadyExistOpening.focused}),Vt(r,_t(o,r))):(c=at(r,l,l.alreadyExistOpening.opening,l.alreadyExistOpening.splitDefault),c&&c.openFile(p,{active:l.alreadyExistOpening.focused}))}}else if(!p)if(f){f=f;let c=50;n.timeOutForInlineTitle&&(n.timeOutForInlineTitle instanceof Object?c=n.timeOutForInlineTitle[L.Platform.isMobile?"mobile":"desktop"]:typeof n.timeOutForInlineTitle=="number"&&(c=n.timeOutForInlineTitle)),r.vault.create(u,"").then(v=>{f==null||f.openFile(v,{active:l.focused}),t.triggerTemplater(v,l)}),new Promise(v=>{setTimeout(()=>{Gn(f,r),v(void 0)},c)})}else if(dr(r,l)){let c=r.vault.getAbstractFileByPath((d=l.templater)!=null?d:"");if(!c||!(c instanceof L.TFile)){new L.Notice(m.t("error.templateNotFound",{path:l.templater}));return}let v=r.vault.getAbstractFileByPath((0,L.normalizePath)(l.path));r.plugins.plugins["templater-obsidian"].templater.create_new_note_from_template(c,v,o,!1)}else r.vault.create(u,"")}function Gn(i,e){return N(this,null,function*(){var a;if(!i)return;let t=i.view.containerEl.querySelector("div.inline-title");if(!t)return;let n=t,r=e.plugins.enabledPlugins.has("obsidian-front-matter-title-plugin");if(t.hasAttribute("ofmt-fake-id")&&r){let o=i.view.containerEl.querySelector("div.inline-title[ofmt-original-id]");(o==null?void 0:o.hasAttribute("hidden"))&&(t.setAttribute("hidden",""),o.removeAttribute("hidden"),n=o)}n.scrollIntoView(),yield n.focus(),(a=window.getSelection())==null||a.selectAllChildren(n)})}function Qn(i){return i.sort((e,t)=>e.commandName==="/"?-1:t.commandName==="/"?1:e.commandName==="{{current}}"?-1:t.commandName==="{{current}}"?1:e.commandName.localeCompare(t.commandName))}var Ot=class extends st.FuzzySuggestModal{constructor(e,t,n){super(e);this.plugin=t,this.currentFile=n}getItems(){let e=JSON.parse(JSON.stringify(this.plugin.settings.folder));if(this.plugin.settings.enableAllFolder)if(!this.plugin.settings.listAllFolderInModals)e.push(Ie(De({},ie),{path:"",commandName:"Other folders..."}));else{e.push(Ie(De({},ie),{path:"",commandName:"-------"}));let t=this.app.vault.getAllLoadedFiles().filter(r=>r instanceof st.TFolder);t.push(this.app.vault.getRoot());let n=t.map(r=>{var o;let a=(o=this.plugin.settings.defaultTemplate)!=null?o:ie;return Ie(De({},a),{path:r.path,commandName:r.path})}).filter(r=>!this.plugin.settings.folder.some(a=>a.path===r.path)).sort((r,a)=>r.path.localeCompare(a.path));e.push(...n)}return this.currentFile?e:e.filter(t=>!t.path.contains("{{current}}"))}getItemText(e){if(this.plugin.settings.listAllFolderInModals&&e.commandName==="-------"||e.path==="-------"){let t=this.resultContainerEl.querySelectorAll(".suggestion-item"),n=t[t.length-1];n&&(e.commandName="",n.classList.add("hr-item"),n.createEl("hr"),e.path="-------")}return e.commandName}onChooseItem(e,t){return N(this,null,function*(){if(this.plugin.settings.enableAllFolder&&e.commandName==="Other folders..."&&e.path===""){new Wt(this.app,this.plugin,!0,this.currentFile).open();return}else this.currentFile&&e.path.contains("{{current}}")&&e.commandName!==""&&e.path!==""?ot(e,this.currentFile,this.plugin):e.commandName!==""&&e.path!==""?yield wt(e,this.plugin):this.plugin.settings.listAllFolderInModals&&new Ot(this.app,this.plugin,this.currentFile).open()})}},Wt=class extends st.FuzzySuggestModal{constructor(e,t,n=!0,r){super(e);this.filter=n,this.plugin=t,this.currentFile=r}getItems(){var r,a;let e=this.app.vault.getAllLoadedFiles().filter(o=>o instanceof st.TFolder);e.push(this.app.vault.getRoot());let t=e.map(o=>{var l;let s=(l=this.plugin.settings.defaultTemplate)!=null?l:ie;return Ie(De({},s),{path:o.path,commandName:o.path})}).filter(o=>!this.plugin.settings.folder.some(s=>s.path===o.path));if(this.currentFile){let o=(a=(r=this.currentFile.parent)==null?void 0:r.path)!=null?a:"/";t=t.filter(l=>l.path!==o);let s=this.plugin.settings.folder.find(l=>l.path.replace("{{current}}",o)===o);!this.filter&&s?t.push(Ie(De({},s),{commandName:"{{current}}"})):s||t.push(Ie(De({},ie),{path:o,commandName:"{{current}}"}))}if(this.filter)return Qn(t);let n=JSON.parse(JSON.stringify(this.plugin.settings.folder));return n=n.filter(o=>!o.path.contains("{{current}}")),t=t.concat(n.map(o=>Ie(De({},o),{commandName:o.path,path:o.path}))),Qn(t)}getItemText(e){return e.commandName}onChooseItem(e,t){return N(this,null,function*(){this.currentFile&&e.path.contains("{{current}}")?ot(e,this.currentFile,this.plugin):yield wt(e,this.plugin)})}};var Re=Ee(require("obsidian"));var A="top",I="bottom",k="right",R="left",Ht="auto",Me=[A,I,k,R],Te="start",ze="end",Zn="clippingParents",Ut="viewport",lt="popper",ei="reference",hr=Me.reduce(function(i,e){return i.concat([e+"-"+Te,e+"-"+ze])},[]),zt=[].concat(Me,[Ht]).reduce(function(i,e){return i.concat([e,e+"-"+Te,e+"-"+ze])},[]),pa="beforeRead",fa="read",ca="afterRead",da="beforeMain",ma="main",ga="afterMain",ha="beforeWrite",va="write",ya="afterWrite",ti=[pa,fa,ca,da,ma,ga,ha,va,ya];function $(i){return i?(i.nodeName||"").toLowerCase():null}function C(i){if(i==null)return window;if(i.toString()!=="[object Window]"){var e=i.ownerDocument;return e&&e.defaultView||window}return i}function oe(i){var e=C(i).Element;return i instanceof e||i instanceof Element}function B(i){var e=C(i).HTMLElement;return i instanceof e||i instanceof HTMLElement}function ut(i){if(typeof ShadowRoot=="undefined")return!1;var e=C(i).ShadowRoot;return i instanceof e||i instanceof ShadowRoot}function ba(i){var e=i.state;Object.keys(e.elements).forEach(function(t){var n=e.styles[t]||{},r=e.attributes[t]||{},a=e.elements[t];!B(a)||!$(a)||(Object.assign(a.style,n),Object.keys(r).forEach(function(o){var s=r[o];s===!1?a.removeAttribute(o):a.setAttribute(o,s===!0?"":s)}))})}function xa(i){var e=i.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(n){var r=e.elements[n],a=e.attributes[n]||{},o=Object.keys(e.styles.hasOwnProperty(n)?e.styles[n]:t[n]),s=o.reduce(function(l,f){return l[f]="",l},{});!B(r)||!$(r)||(Object.assign(r.style,s),Object.keys(a).forEach(function(l){r.removeAttribute(l)}))})}}var ri={name:"applyStyles",enabled:!0,phase:"write",fn:ba,effect:xa,requires:["computeStyles"]};function W(i){return i.split("-")[0]}var he=Math.max,Ke=Math.min,Le=Math.round;function pt(){var i=navigator.userAgentData;return i!=null&&i.brands&&Array.isArray(i.brands)?i.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function St(){return!/^((?!chrome|android).)*safari/i.test(pt())}function se(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var n=i.getBoundingClientRect(),r=1,a=1;e&&B(i)&&(r=i.offsetWidth>0&&Le(n.width)/i.offsetWidth||1,a=i.offsetHeight>0&&Le(n.height)/i.offsetHeight||1);var o=oe(i)?C(i):window,s=o.visualViewport,l=!St()&&t,f=(n.left+(l&&s?s.offsetLeft:0))/r,u=(n.top+(l&&s?s.offsetTop:0))/a,p=n.width/r,d=n.height/a;return{width:p,height:d,top:u,right:f+p,bottom:u+d,left:f,x:f,y:u}}function Je(i){var e=se(i),t=i.offsetWidth,n=i.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-n)<=1&&(n=e.height),{x:i.offsetLeft,y:i.offsetTop,width:t,height:n}}function Nt(i,e){var t=e.getRootNode&&e.getRootNode();if(i.contains(e))return!0;if(t&&ut(t)){var n=e;do{if(n&&i.isSameNode(n))return!0;n=n.parentNode||n.host}while(n)}return!1}function G(i){return C(i).getComputedStyle(i)}function vr(i){return["table","td","th"].indexOf($(i))>=0}function q(i){return((oe(i)?i.ownerDocument:i.document)||window.document).documentElement}function Ae(i){return $(i)==="html"?i:i.assignedSlot||i.parentNode||(ut(i)?i.host:null)||q(i)}function ni(i){return!B(i)||G(i).position==="fixed"?null:i.offsetParent}function wa(i){var e=/firefox/i.test(pt()),t=/Trident/i.test(pt());if(t&&B(i)){var n=G(i);if(n.position==="fixed")return null}var r=Ae(i);for(ut(r)&&(r=r.host);B(r)&&["html","body"].indexOf($(r))<0;){var a=G(r);if(a.transform!=="none"||a.perspective!=="none"||a.contain==="paint"||["transform","perspective"].indexOf(a.willChange)!==-1||e&&a.willChange==="filter"||e&&a.filter&&a.filter!=="none")return r;r=r.parentNode}return null}function ve(i){for(var e=C(i),t=ni(i);t&&vr(t)&&G(t).position==="static";)t=ni(t);return t&&($(t)==="html"||$(t)==="body"&&G(t).position==="static")?e:t||wa(i)||e}function qe(i){return["top","bottom"].indexOf(i)>=0?"x":"y"}function Ye(i,e,t){return he(i,Ke(e,t))}function ii(i,e,t){var n=Ye(i,e,t);return n>t?t:n}function jt(){return{top:0,right:0,bottom:0,left:0}}function Pt(i){return Object.assign({},jt(),i)}function Ft(i,e){return e.reduce(function(t,n){return t[n]=i,t},{})}var Oa=function(e,t){return e=typeof e=="function"?e(Object.assign({},t.rects,{placement:t.placement})):e,Pt(typeof e!="number"?e:Ft(e,Me))};function Sa(i){var e,t=i.state,n=i.name,r=i.options,a=t.elements.arrow,o=t.modifiersData.popperOffsets,s=W(t.placement),l=qe(s),f=[R,k].indexOf(s)>=0,u=f?"height":"width";if(!(!a||!o)){var p=Oa(r.padding,t),d=Je(a),c=l==="y"?A:R,v=l==="y"?I:k,b=t.rects.reference[u]+t.rects.reference[l]-o[l]-t.rects.popper[u],y=o[l]-t.rects.reference[l],g=ve(a),h=g?l==="y"?g.clientHeight||0:g.clientWidth||0:0,w=b/2-y/2,x=p[c],O=h-d[u]-p[v],S=h/2-d[u]/2+w,j=Ye(x,S,O),T=l;t.modifiersData[n]=(e={},e[T]=j,e.centerOffset=j-S,e)}}function Na(i){var e=i.state,t=i.options,n=t.element,r=n===void 0?"[data-popper-arrow]":n;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||!Nt(e.elements.popper,r)||(e.elements.arrow=r))}var ai={name:"arrow",enabled:!0,phase:"main",fn:Sa,effect:Na,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function le(i){return i.split("-")[1]}var ja={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Pa(i,e){var t=i.x,n=i.y,r=e.devicePixelRatio||1;return{x:Le(t*r)/r||0,y:Le(n*r)/r||0}}function oi(i){var e,t=i.popper,n=i.popperRect,r=i.placement,a=i.variation,o=i.offsets,s=i.position,l=i.gpuAcceleration,f=i.adaptive,u=i.roundOffsets,p=i.isFixed,d=o.x,c=d===void 0?0:d,v=o.y,b=v===void 0?0:v,y=typeof u=="function"?u({x:c,y:b}):{x:c,y:b};c=y.x,b=y.y;var g=o.hasOwnProperty("x"),h=o.hasOwnProperty("y"),w=R,x=A,O=window;if(f){var S=ve(t),j="clientHeight",T="clientWidth";if(S===C(t)&&(S=q(t),G(S).position!=="static"&&s==="absolute"&&(j="scrollHeight",T="scrollWidth")),S=S,r===A||(r===R||r===k)&&a===ze){x=I;var E=p&&S===O&&O.visualViewport?O.visualViewport.height:S[j];b-=E-n.height,b*=l?1:-1}if(r===R||(r===A||r===I)&&a===ze){w=k;var F=p&&S===O&&O.visualViewport?O.visualViewport.width:S[T];c-=F-n.width,c*=l?1:-1}}var D=Object.assign({position:s},f&&ja),Y=u===!0?Pa({x:c,y:b},C(t)):{x:c,y:b};if(c=Y.x,b=Y.y,l){var H;return Object.assign({},D,(H={},H[x]=h?"0":"",H[w]=g?"0":"",H.transform=(O.devicePixelRatio||1)<=1?"translate("+c+"px, "+b+"px)":"translate3d("+c+"px, "+b+"px, 0)",H))}return Object.assign({},D,(e={},e[x]=h?b+"px":"",e[w]=g?c+"px":"",e.transform="",e))}function Fa(i){var e=i.state,t=i.options,n=t.gpuAcceleration,r=n===void 0?!0:n,a=t.adaptive,o=a===void 0?!0:a,s=t.roundOffsets,l=s===void 0?!0:s,f={placement:W(e.placement),variation:le(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,oi(Object.assign({},f,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,oi(Object.assign({},f,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var si={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:Fa,data:{}};var Kt={passive:!0};function Ea(i){var e=i.state,t=i.instance,n=i.options,r=n.scroll,a=r===void 0?!0:r,o=n.resize,s=o===void 0?!0:o,l=C(e.elements.popper),f=[].concat(e.scrollParents.reference,e.scrollParents.popper);return a&&f.forEach(function(u){u.addEventListener("scroll",t.update,Kt)}),s&&l.addEventListener("resize",t.update,Kt),function(){a&&f.forEach(function(u){u.removeEventListener("scroll",t.update,Kt)}),s&&l.removeEventListener("resize",t.update,Kt)}}var li={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:Ea,data:{}};var Ca={left:"right",right:"left",bottom:"top",top:"bottom"};function ft(i){return i.replace(/left|right|bottom|top/g,function(e){return Ca[e]})}var Ta={start:"end",end:"start"};function Jt(i){return i.replace(/start|end/g,function(e){return Ta[e]})}function Xe(i){var e=C(i),t=e.pageXOffset,n=e.pageYOffset;return{scrollLeft:t,scrollTop:n}}function Ge(i){return se(q(i)).left+Xe(i).scrollLeft}function yr(i,e){var t=C(i),n=q(i),r=t.visualViewport,a=n.clientWidth,o=n.clientHeight,s=0,l=0;if(r){a=r.width,o=r.height;var f=St();(f||!f&&e==="fixed")&&(s=r.offsetLeft,l=r.offsetTop)}return{width:a,height:o,x:s+Ge(i),y:l}}function br(i){var e,t=q(i),n=Xe(i),r=(e=i.ownerDocument)==null?void 0:e.body,a=he(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=he(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-n.scrollLeft+Ge(i),l=-n.scrollTop;return G(r||t).direction==="rtl"&&(s+=he(t.clientWidth,r?r.clientWidth:0)-a),{width:a,height:o,x:s,y:l}}function Qe(i){var e=G(i),t=e.overflow,n=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+r+n)}function qt(i){return["html","body","#document"].indexOf($(i))>=0?i.ownerDocument.body:B(i)&&Qe(i)?i:qt(Ae(i))}function Ve(i,e){var t;e===void 0&&(e=[]);var n=qt(i),r=n===((t=i.ownerDocument)==null?void 0:t.body),a=C(n),o=r?[a].concat(a.visualViewport||[],Qe(n)?n:[]):n,s=e.concat(o);return r?s:s.concat(Ve(Ae(o)))}function ct(i){return Object.assign({},i,{left:i.x,top:i.y,right:i.x+i.width,bottom:i.y+i.height})}function La(i,e){var t=se(i,!1,e==="fixed");return t.top=t.top+i.clientTop,t.left=t.left+i.clientLeft,t.bottom=t.top+i.clientHeight,t.right=t.left+i.clientWidth,t.width=i.clientWidth,t.height=i.clientHeight,t.x=t.left,t.y=t.top,t}function ui(i,e,t){return e===Ut?ct(yr(i,t)):oe(e)?La(e,t):ct(br(q(i)))}function Aa(i){var e=Ve(Ae(i)),t=["absolute","fixed"].indexOf(G(i).position)>=0,n=t&&B(i)?ve(i):i;return oe(n)?e.filter(function(r){return oe(r)&&Nt(r,n)&&$(r)!=="body"}):[]}function xr(i,e,t,n){var r=e==="clippingParents"?Aa(i):[].concat(e),a=[].concat(r,[t]),o=a[0],s=a.reduce(function(l,f){var u=ui(i,f,n);return l.top=he(u.top,l.top),l.right=Ke(u.right,l.right),l.bottom=Ke(u.bottom,l.bottom),l.left=he(u.left,l.left),l},ui(i,o,n));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}function Et(i){var e=i.reference,t=i.element,n=i.placement,r=n?W(n):null,a=n?le(n):null,o=e.x+e.width/2-t.width/2,s=e.y+e.height/2-t.height/2,l;switch(r){case A:l={x:o,y:e.y-t.height};break;case I:l={x:o,y:e.y+e.height};break;case k:l={x:e.x+e.width,y:s};break;case R:l={x:e.x-t.width,y:s};break;default:l={x:e.x,y:e.y}}var f=r?qe(r):null;if(f!=null){var u=f==="y"?"height":"width";switch(a){case Te:l[f]=l[f]-(e[u]/2-t[u]/2);break;case ze:l[f]=l[f]+(e[u]/2-t[u]/2);break;default:}}return l}function ye(i,e){e===void 0&&(e={});var t=e,n=t.placement,r=n===void 0?i.placement:n,a=t.strategy,o=a===void 0?i.strategy:a,s=t.boundary,l=s===void 0?Zn:s,f=t.rootBoundary,u=f===void 0?Ut:f,p=t.elementContext,d=p===void 0?lt:p,c=t.altBoundary,v=c===void 0?!1:c,b=t.padding,y=b===void 0?0:b,g=Pt(typeof y!="number"?y:Ft(y,Me)),h=d===lt?ei:lt,w=i.rects.popper,x=i.elements[v?h:d],O=xr(oe(x)?x:x.contextElement||q(i.elements.popper),l,u,o),S=se(i.elements.reference),j=Et({reference:S,element:w,strategy:"absolute",placement:r}),T=ct(Object.assign({},w,j)),E=d===lt?T:S,F={top:O.top-E.top+g.top,bottom:E.bottom-O.bottom+g.bottom,left:O.left-E.left+g.left,right:E.right-O.right+g.right},D=i.modifiersData.offset;if(d===lt&&D){var Y=D[r];Object.keys(F).forEach(function(H){var Q=[k,I].indexOf(H)>=0?1:-1,xe=[A,I].indexOf(H)>=0?"y":"x";F[H]+=Y[xe]*Q})}return F}function wr(i,e){e===void 0&&(e={});var t=e,n=t.placement,r=t.boundary,a=t.rootBoundary,o=t.padding,s=t.flipVariations,l=t.allowedAutoPlacements,f=l===void 0?zt:l,u=le(n),p=u?s?hr:hr.filter(function(v){return le(v)===u}):Me,d=p.filter(function(v){return f.indexOf(v)>=0});d.length===0&&(d=p);var c=d.reduce(function(v,b){return v[b]=ye(i,{placement:b,boundary:r,rootBoundary:a,padding:o})[W(b)],v},{});return Object.keys(c).sort(function(v,b){return c[v]-c[b]})}function Ra(i){if(W(i)===Ht)return[];var e=ft(i);return[Jt(i),e,Jt(e)]}function ka(i){var e=i.state,t=i.options,n=i.name;if(!e.modifiersData[n]._skip){for(var r=t.mainAxis,a=r===void 0?!0:r,o=t.altAxis,s=o===void 0?!0:o,l=t.fallbackPlacements,f=t.padding,u=t.boundary,p=t.rootBoundary,d=t.altBoundary,c=t.flipVariations,v=c===void 0?!0:c,b=t.allowedAutoPlacements,y=e.options.placement,g=W(y),h=g===y,w=l||(h||!v?[ft(y)]:Ra(y)),x=[y].concat(w).reduce(function(ee,pe){return ee.concat(W(pe)===Ht?wr(e,{placement:pe,boundary:u,rootBoundary:p,padding:f,flipVariations:v,allowedAutoPlacements:b}):pe)},[]),O=e.rects.reference,S=e.rects.popper,j=new Map,T=!0,E=x[0],F=0;F<x.length;F++){var D=x[F],Y=W(D),H=le(D)===Te,Q=[A,I].indexOf(Y)>=0,xe=Q?"width":"height",V=ye(e,{placement:D,boundary:u,rootBoundary:p,altBoundary:d,padding:f}),U=Q?H?k:R:H?I:A;O[xe]>S[xe]&&(U=ft(U));var _e=ft(U),ue=[];if(a&&ue.push(V[Y]<=0),s&&ue.push(V[U]<=0,V[_e]<=0),ue.every(function(ee){return ee})){E=D,T=!1;break}j.set(D,ue)}if(T)for(var Ze=v?3:1,Pe=function(pe){var fe=x.find(function(Fe){var ce=j.get(Fe);if(ce)return ce.slice(0,pe).every(function(tt){return tt})});if(fe)return E=fe,"break"},$e=Ze;$e>0;$e--){var et=Pe($e);if(et==="break")break}e.placement!==E&&(e.modifiersData[n]._skip=!0,e.placement=E,e.reset=!0)}}var pi={name:"flip",enabled:!0,phase:"main",fn:ka,requiresIfExists:["offset"],data:{_skip:!1}};function fi(i,e,t){return t===void 0&&(t={x:0,y:0}),{top:i.top-e.height-t.y,right:i.right-e.width+t.x,bottom:i.bottom-e.height+t.y,left:i.left-e.width-t.x}}function ci(i){return[A,k,I,R].some(function(e){return i[e]>=0})}function Da(i){var e=i.state,t=i.name,n=e.rects.reference,r=e.rects.popper,a=e.modifiersData.preventOverflow,o=ye(e,{elementContext:"reference"}),s=ye(e,{altBoundary:!0}),l=fi(o,n),f=fi(s,r,a),u=ci(l),p=ci(f);e.modifiersData[t]={referenceClippingOffsets:l,popperEscapeOffsets:f,isReferenceHidden:u,hasPopperEscaped:p},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}var di={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Da};function Ia(i,e,t){var n=W(i),r=[R,A].indexOf(n)>=0?-1:1,a=typeof t=="function"?t(Object.assign({},e,{placement:i})):t,o=a[0],s=a[1];return o=o||0,s=(s||0)*r,[R,k].indexOf(n)>=0?{x:s,y:o}:{x:o,y:s}}function Ba(i){var e=i.state,t=i.options,n=i.name,r=t.offset,a=r===void 0?[0,0]:r,o=zt.reduce(function(u,p){return u[p]=Ia(p,e.rects,a),u},{}),s=o[e.placement],l=s.x,f=s.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=f),e.modifiersData[n]=o}var mi={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Ba};function Ma(i){var e=i.state,t=i.name;e.modifiersData[t]=Et({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var gi={name:"popperOffsets",enabled:!0,phase:"read",fn:Ma,data:{}};function Or(i){return i==="x"?"y":"x"}function Va(i){var e=i.state,t=i.options,n=i.name,r=t.mainAxis,a=r===void 0?!0:r,o=t.altAxis,s=o===void 0?!1:o,l=t.boundary,f=t.rootBoundary,u=t.altBoundary,p=t.padding,d=t.tether,c=d===void 0?!0:d,v=t.tetherOffset,b=v===void 0?0:v,y=ye(e,{boundary:l,rootBoundary:f,padding:p,altBoundary:u}),g=W(e.placement),h=le(e.placement),w=!h,x=qe(g),O=Or(x),S=e.modifiersData.popperOffsets,j=e.rects.reference,T=e.rects.popper,E=typeof b=="function"?b(Object.assign({},e.rects,{placement:e.placement})):b,F=typeof E=="number"?{mainAxis:E,altAxis:E}:Object.assign({mainAxis:0,altAxis:0},E),D=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Y={x:0,y:0};if(!!S){if(a){var H,Q=x==="y"?A:R,xe=x==="y"?I:k,V=x==="y"?"height":"width",U=S[x],_e=U+y[Q],ue=U-y[xe],Ze=c?-T[V]/2:0,Pe=h===Te?j[V]:T[V],$e=h===Te?-T[V]:-j[V],et=e.elements.arrow,ee=c&&et?Je(et):{width:0,height:0},pe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:jt(),fe=pe[Q],Fe=pe[xe],ce=Ye(0,j[V],ee[V]),tt=w?j[V]/2-Ze-ce-fe-F.mainAxis:Pe-ce-fe-F.mainAxis,dt=w?-j[V]/2+Ze+ce+Fe+F.mainAxis:$e+ce+Fe+F.mainAxis,we=e.elements.arrow&&ve(e.elements.arrow),mt=we?x==="y"?we.clientTop||0:we.clientLeft||0:0,gt=(H=D==null?void 0:D[x])!=null?H:0,Ct=U+tt-gt-mt,Oi=U+dt-gt,Ir=Ye(c?Ke(_e,Ct):_e,U,c?he(ue,Oi):ue);S[x]=Ir,Y[x]=Ir-U}if(s){var Br,Si=x==="x"?A:R,Ni=x==="x"?I:k,We=S[O],Tt=O==="y"?"height":"width",Mr=We+y[Si],Vr=We-y[Ni],Xt=[A,R].indexOf(g)!==-1,_r=(Br=D==null?void 0:D[O])!=null?Br:0,$r=Xt?Mr:We-j[Tt]-T[Tt]-_r+F.altAxis,Wr=Xt?We+j[Tt]+T[Tt]-_r-F.altAxis:Vr,Hr=c&&Xt?ii($r,We,Wr):Ye(c?$r:Mr,We,c?Wr:Vr);S[O]=Hr,Y[O]=Hr-We}e.modifiersData[n]=Y}}var hi={name:"preventOverflow",enabled:!0,phase:"main",fn:Va,requiresIfExists:["offset"]};function Sr(i){return{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}}function Nr(i){return i===C(i)||!B(i)?Xe(i):Sr(i)}function _a(i){var e=i.getBoundingClientRect(),t=Le(e.width)/i.offsetWidth||1,n=Le(e.height)/i.offsetHeight||1;return t!==1||n!==1}function jr(i,e,t){t===void 0&&(t=!1);var n=B(e),r=B(e)&&_a(e),a=q(e),o=se(i,r,t),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(n||!n&&!t)&&(($(e)!=="body"||Qe(a))&&(s=Nr(e)),B(e)?(l=se(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):a&&(l.x=Ge(a))),{x:o.left+s.scrollLeft-l.x,y:o.top+s.scrollTop-l.y,width:o.width,height:o.height}}function $a(i){var e=new Map,t=new Set,n=[];i.forEach(function(a){e.set(a.name,a)});function r(a){t.add(a.name);var o=[].concat(a.requires||[],a.requiresIfExists||[]);o.forEach(function(s){if(!t.has(s)){var l=e.get(s);l&&r(l)}}),n.push(a)}return i.forEach(function(a){t.has(a.name)||r(a)}),n}function Pr(i){var e=$a(i);return ti.reduce(function(t,n){return t.concat(e.filter(function(r){return r.phase===n}))},[])}function Fr(i){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(i())})})),e}}function Er(i){var e=i.reduce(function(t,n){var r=t[n.name];return t[n.name]=r?Object.assign({},r,n,{options:Object.assign({},r.options,n.options),data:Object.assign({},r.data,n.data)}):n,t},{});return Object.keys(e).map(function(t){return e[t]})}var vi={placement:"bottom",modifiers:[],strategy:"absolute"};function yi(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return!e.some(function(n){return!(n&&typeof n.getBoundingClientRect=="function")})}function bi(i){i===void 0&&(i={});var e=i,t=e.defaultModifiers,n=t===void 0?[]:t,r=e.defaultOptions,a=r===void 0?vi:r;return function(s,l,f){f===void 0&&(f=a);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},vi,a),modifiersData:{},elements:{reference:s,popper:l},attributes:{},styles:{}},p=[],d=!1,c={state:u,setOptions:function(g){var h=typeof g=="function"?g(u.options):g;b(),u.options=Object.assign({},a,u.options,h),u.scrollParents={reference:oe(s)?Ve(s):s.contextElement?Ve(s.contextElement):[],popper:Ve(l)};var w=Pr(Er([].concat(n,u.options.modifiers)));return u.orderedModifiers=w.filter(function(x){return x.enabled}),v(),c.update()},forceUpdate:function(){if(!d){var g=u.elements,h=g.reference,w=g.popper;if(!!yi(h,w)){u.rects={reference:jr(h,ve(w),u.options.strategy==="fixed"),popper:Je(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(F){return u.modifiersData[F.name]=Object.assign({},F.data)});for(var x=0;x<u.orderedModifiers.length;x++){if(u.reset===!0){u.reset=!1,x=-1;continue}var O=u.orderedModifiers[x],S=O.fn,j=O.options,T=j===void 0?{}:j,E=O.name;typeof S=="function"&&(u=S({state:u,options:T,name:E,instance:c})||u)}}}},update:Fr(function(){return new Promise(function(y){c.forceUpdate(),y(u)})}),destroy:function(){b(),d=!0}};if(!yi(s,l))return c;c.setOptions(f).then(function(y){!d&&f.onFirstUpdate&&f.onFirstUpdate(y)});function v(){u.orderedModifiers.forEach(function(y){var g=y.name,h=y.options,w=h===void 0?{}:h,x=y.effect;if(typeof x=="function"){var O=x({state:u,name:g,instance:c,options:w}),S=function(){};p.push(O||S)}})}function b(){p.forEach(function(y){return y()}),p=[]}return c}}var Wa=[li,gi,si,ri,mi,pi,hi,ai,di],Cr=bi({defaultModifiers:Wa});var Z=Ee(require("obsidian")),xi;(function(t){t[t.TemplateFiles=0]="TemplateFiles",t[t.ScriptFiles=1]="ScriptFiles"})(xi||(xi={}));var Ha=(i,e)=>(i%e+e)%e,wi=class{constructor(e,t,n){this.owner=e,this.containerEl=t,t.on("click",".suggestion-item",this.onSuggestionClick.bind(this)),t.on("mousemove",".suggestion-item",this.onSuggestionMouseover.bind(this)),n.register([],"ArrowUp",r=>{if(!r.isComposing)return this.setSelectedItem(this.selectedItem-1,!0),!1}),n.register([],"ArrowDown",r=>{if(!r.isComposing)return this.setSelectedItem(this.selectedItem+1,!0),!1}),n.register([],"Enter",r=>{if(!r.isComposing)return this.useSelectedItem(r),!1})}onSuggestionClick(e,t){e.preventDefault();let n=this.suggestions.indexOf(t);this.setSelectedItem(n,!1),this.useSelectedItem(e)}onSuggestionMouseover(e,t){let n=this.suggestions.indexOf(t);this.setSelectedItem(n,!1)}setSuggestions(e){this.containerEl.empty();let t=[];e.forEach(n=>{let r=this.containerEl.createDiv("suggestion-item");this.owner.renderSuggestion(n,r),t.push(r)}),this.values=e,this.suggestions=t,this.setSelectedItem(0,!1)}useSelectedItem(e){let t=this.values[this.selectedItem];t&&this.owner.selectSuggestion(t,e)}setSelectedItem(e,t){let n=Ha(e,this.suggestions.length),r=this.suggestions[this.selectedItem],a=this.suggestions[n];r==null||r.removeClass("is-selected"),a==null||a.addClass("is-selected"),this.selectedItem=n,t&&a.scrollIntoView(!1)}},Tr=class{constructor(e){this.inputEl=e,this.scope=new Z.Scope,this.suggestEl=createDiv("suggestion-container");let t=this.suggestEl.createDiv("suggestion");this.suggest=new wi(this,t,this.scope),this.scope.register([],"Escape",this.close.bind(this)),this.inputEl.addEventListener("input",this.onInputChanged.bind(this)),this.inputEl.addEventListener("focus",this.onInputChanged.bind(this)),this.inputEl.addEventListener("blur",this.close.bind(this)),this.suggestEl.on("mousedown",".suggestion-container",n=>{n.preventDefault()})}onInputChanged(){let e=this.inputEl.value,t=this.getSuggestions(e);if(!t){this.close();return}t.length>0?(this.suggest.setSuggestions(t),this.open(app.dom.appContainerEl,this.inputEl)):this.close()}open(e,t){app.keymap.pushScope(this.scope),e.appendChild(this.suggestEl),this.popper=Cr(t,this.suggestEl,{placement:"bottom-start",modifiers:[{name:"sameWidth",enabled:!0,fn:({state:n,instance:r})=>{let a=`${n.rects.reference.width}px`;n.styles.popper.width!==a&&(n.styles.popper.width=a,r.update())},phase:"beforeWrite",requires:["computeStyles"]}]})}close(){app.keymap.popScope(this.scope),this.suggest.setSuggestions([]),this.popper&&this.popper.destroy(),this.suggestEl.detach()}},Lr=class extends Tr{getSuggestions(e){let t=app.vault.getAllLoadedFiles(),n=[],r=e.toLowerCase();return t.forEach(a=>{a instanceof Z.TFolder&&a.path.toLowerCase().contains(r)&&n.push(a)}),n}renderSuggestion(e,t){t.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}},Ar=class extends Tr{constructor(e,t){super(e);this.inputEl=e;this.app=t;this.app=t}get_folder(){return this.app.plugins.getPlugin("templater-obsidian")?this.app.plugins.getPlugin("templater-obsidian").settings.templates_folder:""}get_error_msg(){return"Templates folder doesn't exist"}resolve_tfolder(e){e=(0,Z.normalizePath)(e);let t=this.app.vault.getAbstractFileByPath(e);return!t||!(t instanceof Z.TFolder)?null:t}get_tfiles_from_folder(e){let t=this.resolve_tfolder(e);if(!t)return new Z.Notice(this.get_error_msg()),[];let n=[];return Z.Vault.recurseChildren(t,r=>{r instanceof Z.TFile&&n.push(r)}),n.sort((r,a)=>r.basename.localeCompare(a.basename)),n}getSuggestions(e){let t=this.get_tfiles_from_folder(this.get_folder());if(!t)return[];let n=[],r=e.toLowerCase();return t.forEach(a=>{a instanceof Z.TFile&&a.extension==="md"&&a.path.toLowerCase().contains(r)&&n.push(a)}),n}renderSuggestion(e,t){t.setText(e.path)}selectSuggestion(e){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close()}};var M=Ee(require("obsidian"));var Yt=class extends M.Modal{constructor(e,t,n=!1,r){super(e);this.result=t,this.onSubmit=r,this.defaultTemp=n}settingsTemplateDate(e){let t=document.createDocumentFragment(),n=m.t("common.date");t.createEl("span",void 0,a=>{a.innerText=m.t("template.dropDown.date.desc"),a.createEl("a",void 0,o=>{o.innerText=m.t("template.dropDown.date.here"),o.href=m.t("template.dropDown.date.url")})});let r=new M.Setting(e).setName(n).setDesc(t).addText(a=>{a.setPlaceholder("YYYY-MM-DD").setValue(this.result.template.format).onChange(o=>{this.result.template.format=o,r==null||r.controlEl.classList.remove("is-error")})});return r}settingTemplater(e){return this.app.plugins.getPlugin("templater-obsidian")?(e.createEl("h2",{text:m.t("editFolder.templater.title")}),new M.Setting(e).setName(m.t("editFolder.templater.setting.title")).setDesc(m.t("editFolder.templater.setting.desc")).addSearch(t=>{var n;new Ar(t.inputEl,this.app),t.setPlaceholder(m.t("editFolder.templater.setting.placeholder")).setValue((n=this.result.templater)!=null?n:"").onChange(r=>{this.result.templater=r})})):null}settingTemplate(e,t,n){let r=null;return t!==J.none&&(n.setClass("create-note-in-folder"),n.setClass("edit"),n.setClass("is-facultative"),n.setDesc(m.t("template.desc")),e.createEl("h3",{text:m.t("template.header")}),J.date===this.result.template.type?r=this.settingsTemplateDate(e):J.folderName===this.result.template.type&&(this.result.template.format=this.result.path.split("/").pop()),new M.Setting(e).setName(m.t("template.position.title")).addDropdown(a=>{a.addOption(ge.prepend,m.t("template.position.prepend")).addOption(ge.append,m.t("template.position.append")).setValue(this.result.template.position).onChange(o=>{this.result.template.position=o})}).addText(a=>{a.setPlaceholder(m.t("template.separator")),a.setValue(this.result.template.separator),a.onChange(o=>{this.result.template.separator=o})})),r}settingSplit(e,t,n="default"){let r=n==="default"?this.result.splitDefault:this.result.alreadyExistOpening.splitDefault;t===P.split&&e.addDropdown(a=>a.addOption(Ue.horizontal,m.t("editFolder.opening.split.horizontal")).addOption(Ue.vertical,m.t("editFolder.opening.split.vertical")).setValue(r).onChange(o=>N(this,null,function*(){n==="default"?this.result.splitDefault=o:this.result.alreadyExistOpening.splitDefault=o})))}onOpen(){let{contentEl:e}=this;e.empty(),e.addClasses(["create-note-in-folder","edit"]),this.defaultTemp?e.createEl("h2",{text:m.t("editFolder.default")}):e.createEl("h2",{text:m.t("editFolder.title")});let t=new M.Setting(e).setName(m.t("editFolder.fileName.title")).setDesc(m.t("editFolder.fileName.desc")).addText(a=>{a.setValue(this.result.fileName).onChange(o=>{this.result.fileName=o.replace(".md","")})});new M.Setting(e).setName(m.t("editFolder.increments.title")).setDesc(m.t("editFolder.increments.desc")).addToggle(a=>{var o;return a.setValue((o=this.result.template.increment)!=null?o:!0).onChange(s=>N(this,null,function*(){this.result.template.increment=s,this.onOpen()}))}),new M.Setting(e).setName(m.t("editFolder.template.title")).addDropdown(a=>{a.addOption(J.none,m.t("editFolder.template.dropDown.none")).addOption(J.date,m.t("common.date")).addOption(J.folderName,m.t("editFolder.template.dropDown.folderName")).setValue(this.result.template.type).onChange(o=>{this.result.template.type=o,this.onOpen()})});let n=this.settingTemplate(e,this.result.template.type,t);e.createEl("h2",{text:m.t("editFolder.opening.head")});let r=new M.Setting(e).setName(m.t("editFolder.opening.title")).setDesc(m.t("editFolder.opening.desc")).addDropdown(a=>{a.addOption(P.newTab,m.t("editFolder.opening.dropDown.newTab")).addOption(P.current,m.t("editFolder.opening.dropDown.current")).addOption(P.newWindow,m.t("editFolder.opening.dropDown.newWindow")).addOption(P.split,m.t("editFolder.opening.dropDown.split")).addOption(P.nothing,m.t("editFolder.opening.dropDown.nothing")).setValue(this.result.opening).onChange(o=>{this.result.opening=o,this.onOpen()})});if(this.settingSplit(r,this.result.opening),this.result.opening!==P.nothing)new M.Setting(e).setName(m.t("editFolder.focus.title")).setDesc(m.t("editFolder.focus.desc")).addToggle(a=>a.setValue(this.result.focused).onChange(o=>N(this,null,function*(){this.result.focused=o})));else if(!this.result.template.increment&&this.result.opening===P.nothing){e.createEl("h3",{text:m.t("editFolder.opening.nothing")}),e.createEl("p",{text:m.t("editFolder.alreadyExist.desc")});let a=this.result.alreadyExistOpening,o=new M.Setting(e).setName(m.t("editFolder.alreadyExist.title")).addDropdown(s=>{s.addOption(P.newTab,m.t("editFolder.opening.dropDown.newTab")).addOption(P.current,m.t("editFolder.opening.dropDown.current")).addOption(P.newWindow,m.t("editFolder.opening.dropDown.newWindow")).addOption(P.split,m.t("editFolder.opening.dropDown.split")).setValue(this.result.alreadyExistOpening.opening).onChange(l=>{this.result.alreadyExistOpening.opening=l,this.onOpen()})});this.settingSplit(o,a.opening,"exists"),a.opening!==P.nothing&&new M.Setting(e).setName(m.t("editFolder.focus.title")).setDesc(m.t("editFolder.alreadyExist.focus")).addToggle(s=>s.setValue(a.focused).onChange(l=>N(this,null,function*(){a.focused=l})))}this.settingTemplater(e),this.contentEl.createEl("h2",{text:m.t("editFolder.other.title")}),new M.Setting(e).setName(m.t("editFolder.other.setting.title")).setDesc(m.t("editFolder.other.setting.desc")).setDisabled(!this.result.path.contains("{{current}}")).addToggle(a=>a.setValue(this.result.fileMenu).onChange(o=>N(this,null,function*(){this.result.fileMenu=o}))),new M.Setting(e).addButton(a=>a.setButtonText(m.t("common.submit")).onClick(()=>{this.result.template.type===J.none&&this.result.fileName.trim().length===0?(new M.Notice(m.t("error.fileName")),t.controlEl.classList.add("is-error")):this.result.template.type===J.date&&!xt(this.result.template.format)?(new M.Notice(m.t("error.date")),n==null||n.controlEl.classList.add("is-error")):this.result.fileName.match(/[*"/\\<>:|?]+/)?(new M.Notice(m.t("error.invalidExpression")),t.controlEl.classList.add("is-error")):(this.onSubmit(this.result),this.close())}))}onClose(){let{contentEl:e}=this;e.empty()}};var be=Ee(require("obsidian"));var Rr=class extends be.Modal{constructor(e,t,n){super(e);this.result=t,this.onSubmit=n}onOpen(){let{contentEl:e}=this;e.empty(),e.addClasses(["create-note-in-folder","manage"]),e.createEl("h2",{text:m.t("variable.title")}),e.createEl("p",{text:m.t("variable.desc.filename")}).createEl("ul",void 0,n=>{n.createEl("li",{text:m.t("variable.desc.explain")});let a=n.createEl("li",{text:m.t("variable.desc.regex.info")}).createEl("p",{text:`${m.t("common.example")} `});a.createEl("code",{text:"/\\d+-\\d+/gi"}),a.addClass("list"),n.createEl("li",{text:m.t("variable.desc.regex.warn")}),n.createEl("li",{text:m.t("variable.desc.insensitive")})}),e.createEl("p",void 0,n=>{n.createEl("p",{text:`\u26A0\uFE0F ${m.t("variable.desc.warn.usage")}`,cls:"callout-title"}),n.createEl("p",void 0,r=>{r.createEl("span",{text:m.t("common.example")}),r.createEl("span",{text:" ",cls:"code"}),r.createEl("code",{text:"MyFolder/{{month}}/{{date}}.md",cls:"code"})})}).addClass("is-warning"),new be.Setting(e).addButton(n=>n.setButtonText(m.t("variable.add")).onClick(()=>{this.result.push({name:"",value:"",type:"string"}),this.onOpen()}));for(let n of this.result)new be.Setting(e).setClass("no-display").setClass("custom-variables").addText(r=>{r.setPlaceholder(m.t("variable.name")).setValue(n.name).onChange(a=>{n.name=a})}).addDropdown(r=>{r.addOption("string",m.t("common.string")).addOption("date",m.t("common.date")).setValue(n.type).onChange(a=>{n.type=a})}).addText(r=>{r.setPlaceholder(m.t("variable.value")).setValue(n.value).onChange(a=>{n.value=a})}).addExtraButton(r=>{r.setIcon("cross").setTooltip(m.t("variable.remove")).onClick(()=>{this.result.splice(this.result.indexOf(n),1),this.onOpen()})});new be.Setting(e).addButton(n=>n.setButtonText(m.t("common.submit")).onClick(()=>{this.addErrorClass()}))}onClose(){let{contentEl:e}=this;e.empty()}validateEntry(){let e=[];if(this.result.some(n=>n.name.trim().length===0)){let n=m.t("common.name");new be.Notice(m.t("error.empty",{name:n})),e.push({type:"name",index:this.result.findIndex(r=>r.name.trim().length===0)})}if(this.result.some(n=>n.value.trim().length===0)){let n=m.t("common.value");new be.Notice(m.t("error.empty",{name:n})),e.push({type:"value",index:this.result.findIndex(r=>r.value.trim().length===0)})}this.result.some(n=>n.type==="date"&&!xt(n.value))&&(new be.Notice(m.t("error.date")),e.push({type:"value",index:this.result.findIndex(n=>n.type==="date"&&!xt(n.value))}));let t=this.result.map(n=>n.name).filter((n,r,a)=>a.indexOf(n)!==r);if(t.length!==0){let r=t.map(a=>{let o=this.result.findIndex(s=>s.name===a);return this.result[o]}).map(a=>a.name).join(", ");new be.Notice(m.t("error.duplicate",{name:r}));for(let a of t)e.push({type:"name",index:this.result.findIndex(o=>o.name===a)})}return e}addErrorClass(){let e=this.validateEntry();e.length===0&&(this.onOpen(),this.onSubmit(this.result),this.close()),this.onOpen();for(let t of e){let n=t.index<0?0:t.index,r=this.contentEl.getElementsByClassName("manage-custom-variables")[n],a=t.type;a==="name"&&r.getElementsByTagName("input")[0].classList.add("is-error","edit","create-note-in-folder"),a==="value"&&r.getElementsByTagName("input")[1].classList.add("is-error","edit","create-note-in-folder")}}};var kr=class extends Re.PluginSettingTab{constructor(e,t){super(e,t);this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.addClasses(["create-note-in-folder","settingsTab"]),e.createEl("h1",{text:this.plugin.manifest.name}),e.createEl("p",{text:m.t("variable.current.desc")}),e.createEl("p",{text:m.t("variable.current.warning"),cls:"is-warning"}),new Re.Setting(e).setName(m.t("allFolder.enable")).addToggle(t=>{var n;return t.setValue((n=this.plugin.settings.enableAllFolder)!=null?n:!1).onChange(r=>N(this,null,function*(){this.plugin.settings.enableAllFolder=r,yield this.plugin.saveSettings(),this.plugin.quickSwitcherAnyFolder(),this.display()}))}).addButton(t=>t.setButtonText(m.t("allFolder.default.title")).setTooltip(m.t("allFolder.default.tooltip")).onClick(()=>{var r;let n=JSON.parse(JSON.stringify((r=this.plugin.settings.defaultTemplate)!=null?r:ie));new Yt(this.app,n,!0,a=>{this.plugin.settings.defaultTemplate=a,this.plugin.saveSettings()}).open()})),this.plugin.settings.enableAllFolder&&(new Re.Setting(e).setName(m.t("allFolder.listAllModals")).addToggle(t=>{var n;return t.setValue((n=this.plugin.settings.listAllFolderInModals)!=null?n:!1).onChange(r=>N(this,null,function*(){this.plugin.settings.listAllFolderInModals=r,yield this.plugin.saveSettings()}))}),new Re.Setting(e).setName(m.t("allFolder.filterAnyFolderCommand.title")).setDesc(m.t("allFolder.filterAnyFolderCommand.desc")).addToggle(t=>{var n;return t.setValue((n=this.plugin.settings.filterAnyFolderCommand)!=null?n:!1).onChange(r=>N(this,null,function*(){this.plugin.settings.filterAnyFolderCommand=r,yield this.plugin.saveSettings()}))})),new Re.Setting(e).setClass("no-display").addButton(t=>t.setButtonText(m.t("variable.title")).onClick(()=>{var r;let n=JSON.parse(JSON.stringify((r=this.plugin.settings.customVariables)!=null?r:[]));new Rr(this.app,n,a=>N(this,null,function*(){this.plugin.settings.customVariables=a,yield this.plugin.saveSettings()})).open()})),e.createEl("h3",{text:m.t("title")});for(let t of this.plugin.settings.folder){let n=new Re.Setting(e).setClass("no-display").addButton(o=>o.setIcon("copy").setTooltip(m.t("duplicate")).onClick(()=>N(this,null,function*(){let s=JSON.parse(JSON.stringify(t));s=this.duplicateFolder(s),this.plugin.settings.folder.push(s),yield this.plugin.saveSettings(),this.display()}))).addButton(o=>o.setIcon("pencil").setTooltip(m.t("editFolder.title")).onClick(()=>N(this,null,function*(){let s=JSON.parse(JSON.stringify(t)),l=this.plugin.settings.folder.indexOf(t);new Yt(this.app,s,!1,f=>N(this,null,function*(){t=f,this.plugin.settings.folder[l]=f,yield this.plugin.addNewCommands(this.plugin.settings.folder[l].commandName,this.plugin.settings.folder[l],!0),yield this.plugin.removeCommands(),!f.fileMenu||!f.path.contains("{{current}}")?this.plugin.removeDisabledMenu(f,"all"):f.template.increment?f.template.increment&&this.plugin.removeDisabledMenu(f,"increment"):this.plugin.removeDisabledMenu(f,"create"),yield this.plugin.saveSettings()})).open()}))).addText(o=>{var s;o.setPlaceholder(m.t("commandName")).setValue((s=t.commandName)!=null?s:t.path).onChange(l=>N(this,null,function*(){let f=t.commandName;t.commandName=l,yield this.plugin.addNewCommands(f,t,!0),yield this.plugin.removeCommands(),yield this.plugin.saveSettings()})),this.addTooltip(m.t("commandName"),o.inputEl)}).addSearch(o=>{new Lr(o.inputEl),o.setPlaceholder(m.t("example")),o.setValue(t.path),o.onChange(s=>N(this,null,function*(){let l=t.commandName&&t.commandName.length>0?t.commandName:s;t.path=s,t.commandName=l,yield this.plugin.addNewCommands(l,t,!0),yield this.plugin.removeCommands(),yield this.plugin.saveSettings()})),this.addTooltip(m.t("path"),o.inputEl)}),r=this.plugin.settings.folder.indexOf(t)===0;n.addExtraButton(o=>{r||o.setTooltip(m.t("up")),o.setDisabled(r).setIcon("arrow-up").setTooltip(m.t("up")).onClick(()=>N(this,null,function*(){let s=this.plugin.settings.folder.indexOf(t);this.plugin.settings.folder.splice(s,1),this.plugin.settings.folder.splice(s-1,0,t),yield this.plugin.saveSettings(),this.display()}))});let a=this.plugin.settings.folder.indexOf(t)===this.plugin.settings.folder.length-1;n.addExtraButton(o=>{a||o.setTooltip(m.t("down")),o.setDisabled(a).setIcon("arrow-down").onClick(()=>N(this,null,function*(){let s=this.plugin.settings.folder.indexOf(t);this.plugin.settings.folder.splice(s,1),this.plugin.settings.folder.splice(s+1,0,t),yield this.plugin.saveSettings(),this.display()}))}),n.addButton(o=>o.setIcon("cross").setTooltip(m.t("remove")).onClick(()=>N(this,null,function*(){this.plugin.settings.folder.splice(this.plugin.settings.folder.indexOf(t),1),yield this.plugin.saveSettings(),yield this.plugin.addNewCommands(t.commandName,void 0,!0),this.display()})))}new Re.Setting(e).addButton(t=>t.setButtonText(m.t("editFolder.add")).onClick(()=>N(this,null,function*(){var r;let n=JSON.parse(JSON.stringify((r=this.plugin.settings.defaultTemplate)!=null?r:ie));this.plugin.settings.folder.push(n),yield this.plugin.saveSettings(),this.display()})))}duplicateFolder(e){let t=JSON.parse(JSON.stringify(e)),n=this.plugin.settings.folder.filter(r=>r.commandName.replace(/ \(\d+\)+/,"")===e.commandName.replace(/ \(\d+\)+/,""));return n.length>0&&(t.commandName=`${e.commandName.replace(/ \(\d+\)+/,"")} (${n.length})`),t}addTooltip(e,t){t.onfocus=()=>{var r;let n=(r=t.parentElement)==null?void 0:r.createEl("div",{text:e,cls:"tooltip"});if(n){let a=t.getBoundingClientRect();n.style.top=`${a.top+a.height+5}px`,n.style.left=`${a.left+a.width/2}px`}},t.onblur=()=>{var n,r;(r=(n=t.parentElement)==null?void 0:n.querySelector(".tooltip"))==null||r.remove()}}};var Dr=class extends ke.Plugin{removeCommands(){return N(this,null,function*(){let e=Object.keys(this.app.commands.commands).filter(t=>t.startsWith("create-note-in-folder"));e=e.filter(t=>!t.replace("create-note-in-folder:","").contains("quickSwitcher-creator"));for(let t of e)this.settings.folder.some(n=>n.commandName===t.replace("create-note-in-folder:",""))||this.app.commands.removeCommand(t)})}addNewCommands(e,t,n=!1){return N(this,null,function*(){var r,a,o,s;e!==void 0&&this.app.commands.removeCommand(`create-note-in-folder:${e}`),t!==void 0&&(t.path.contains("{{current}}")?this.addCommand({id:`${(o=t.commandName)!=null?o:t.path}`,name:`${(s=t.commandName)!=null?s:t.path}`,checkCallback:l=>{var u;let f=(u=this.app.workspace.getActiveFile())!=null?u:void 0;return f?(l||ot(t,f,this),!0):!1}}):this.addCommand({id:`${(r=t.commandName)!=null?r:t.path}`,name:`${(a=t.commandName)!=null?a:t.path}`,callback:()=>N(this,null,function*(){yield wt(t,this)})})),n&&this.quickSwitcherCommand(),(t==null?void 0:t.fileMenu)&&(t==null?void 0:t.path.contains("{{current}}"))&&this.registerEvent(this.app.workspace.on("file-menu",(l,f)=>{var b,y;let u=`Create note : ${(b=t.commandName)!=null?b:t.path}`,{folderPath:p,defaultName:d}=Mt(t,f,this),c=(0,ke.normalizePath)(`${p}/${d}`);this.app.vault.getAbstractFileByPath(t.path.replace("{{current}}",c))&&!t.template.increment&&(u=`Open note : ${(y=t.commandName)!=null?y:t.path}`),l.addItem(g=>{g.setTitle(u).setIcon("file-plus").onClick(()=>{ot(t,f,this)})})}))})}removeDisabledMenu(e,t="all"){this.registerEvent(this.app.workspace.on("file-menu",n=>{var a,o,s,l,f,u,p;let r=`Create note : ${(a=e.commandName)!=null?a:e.path}`;t==="increment"?r=`Open note : ${(o=e.commandName)!=null?o:e.path}`:t==="create"&&(r=`Create note : ${(s=e.commandName)!=null?s:e.path}`);for(let d of n.items)((l=d.titleEl)==null?void 0:l.getText())===r?d.dom.addClasses(["create-note-in-folder","disabled"]):t==="all"&&(((f=d.titleEl)==null?void 0:f.getText())===r||((u=d.titleEl)==null?void 0:u.getText())===`Open note : ${(p=e.commandName)!=null?p:e.path}`)&&d.dom.addClasses(["create-note-in-folder","disabled"])}))}triggerTemplater(e,t){return N(this,null,function*(){if(this.app.plugins.enabledPlugins.has("templater-obsidian")){let n=t.templater;if(!n)return;let r=this.app.vault.getAbstractFileByPath(n);if(r){if(!(r instanceof ke.TFile)){new ke.Notice(m.t("error.templateNotFile",{path:n}));return}}else{new ke.Notice(m.t("error.templateNotFound",{path:n}));return}let a=yield this.app.vault.read(r);yield this.app.vault.modify(e,a);try{this.app.commands.executeCommandById("templater-obsidian:replace-in-file-templater")}catch(o){console.log(o)}}})}quickSwitcherCommand(){this.addCommand({id:"quickSwitcher-creator",name:m.t("quickSwitcher.simple"),callback:()=>{var e;try{let t=(e=this.app.workspace.getActiveFile())!=null?e:void 0;new Ot(this.app,this,t).open()}catch(t){console.log(t)}}})}quickSwitcherAnyFolder(){this.settings.enableAllFolder?this.addCommand({id:"quickSwitcher-creator-anyFolder",name:m.t("quickSwitcher.anyFolder"),callback:()=>{var e,t;try{let n=(e=this.app.workspace.getActiveFile())!=null?e:void 0;new Wt(this.app,this,(t=this.settings.filterAnyFolderCommand)!=null?t:!1,n).open()}catch(n){console.log(n)}}}):this.app.commands.removeCommand("create-note-in-folder:quickSwitcher-creator-anyFolder")}onload(){return N(this,null,function*(){if(console.info(`${this.manifest.name} v${this.manifest.version} loaded`),yield m.init({lng:Xn,fallbackLng:"en",resources:fr,returnNull:!1}),yield this.loadSettings(),this.settings.folder.length>0&&typeof this.settings.folder[0]=="string"){let t=this.settings.folder;this.settings.folder=[];for(let n of t){let r=JSON.parse(JSON.stringify(ie));r.path=n,this.settings.folder.push(r)}yield this.saveSettings()}for(let t of this.settings.folder)Object.values(t).includes(t.template)||(t.fileName=t.formatName,t.template={type:t.typeName==="string"?J.none:t.typeName,format:t.formatName,position:ge.append,separator:""},delete t.TypeName,delete t.formatName),yield this.saveSettings();this.addSettingTab(new kr(this.app,this));let e=this.settings.folder;for(let t of e)t.commandName=t.commandName&&t.commandName.length>0?t.commandName:t.path,yield this.saveSettings(),yield this.addNewCommands(void 0,t);this.quickSwitcherCommand(),this.quickSwitcherAnyFolder()})}onunload(){console.info(`${this.manifest.name} v${this.manifest.version} unloaded`)}mergeFolderSettings(){for(let e in this.settings.folder)this.settings.folder[e]=sr(ie,this.settings.folder[e]);return this.settings}loadSettings(){return N(this,null,function*(){let e=yield this.loadData();try{this.settings=sr(cr,e),this.settings=this.mergeFolderSettings()}catch(t){console.warn("Error while merging folder settings ; use default merge"),this.settings=Object.assign({},cr,yield this.loadData())}})}saveSettings(){return N(this,null,function*(){yield this.saveData(this.settings)})}};0&&(module.exports={});
